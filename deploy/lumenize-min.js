require=function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);throw Error("Cannot find module '"+o+"'")}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;r.length>o;o++)i(r[o]);return i}({wlmLJI:[function(t,e,n){(function(){var e,r;r=t("tztime"),n.Time=r.Time,n.TimelineIterator=r.TimelineIterator,n.Timeline=r.Timeline,n.utils=r.utils,n.TimeInStateCalculator=t("./src/TimeInStateCalculator").TimeInStateCalculator,n.TransitionsCalculator=t("./src/TransitionsCalculator").TransitionsCalculator,n.TimeSeriesCalculator=t("./src/TimeSeriesCalculator").TimeSeriesCalculator,e=t("./src/dataTransform"),n.arrayOfMaps_To_CSVStyleArray=e.arrayOfMaps_To_CSVStyleArray,n.csvStyleArray_To_ArrayOfMaps=e.csvStyleArray_To_ArrayOfMaps,n.arrayOfMaps_To_HighChartsSeries=e.arrayOfMaps_To_HighChartsSeries,n.csvString_To_CSVStyleArray=e.csvString_To_CSVStyleArray,n.csvStyleArray_To_CSVString=e.csvStyleArray_To_CSVString,n.functions=t("./src/functions").functions,n.histogram=t("./src/histogram").histogram,n.multiRegression=t("./src/multiRegression").multiRegression,n.table=t("./src/table").table,n.OLAPCube=t("./src/OLAPCube").OLAPCube,n.anova=t("./src/anova").anova,n.distributions=t("./src/distributions").distributions,n.BayesianClassifier=t("./src/Classifier").BayesianClassifier,n.Classifier=t("./src/Classifier").Classifier,n.Store=t("./src/Store").Store,n.RandomPicker=t("./src/RandomPicker").RandomPicker}).call(this)},{"./src/Classifier":12,"./src/OLAPCube":13,"./src/RandomPicker":14,"./src/Store":15,"./src/TimeInStateCalculator":16,"./src/TimeSeriesCalculator":17,"./src/TransitionsCalculator":18,"./src/anova":19,"./src/dataTransform":21,"./src/distributions":22,"./src/functions":23,"./src/histogram":24,"./src/multiRegression":25,"./src/table":26,tztime:11}],lumenize:[function(t,e){e.exports=t("wlmLJI")},{}],3:[function(){},{}],4:[function(t,e,n){(function(t){function e(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;t.length>r;r++)e(t[r],r,t)&&n.push(t[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,a=function(t){return i.exec(t).slice(1)};n.resolve=function(){for(var n="",i=!1,a=arguments.length-1;a>=-1&&!i;a--){var o=a>=0?arguments[a]:t.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(n=o+"/"+n,i="/"===o.charAt(0))}return n=e(r(n.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+n||"."},n.normalize=function(t){var i=n.isAbsolute(t),a="/"===o(t,-1);return t=e(r(t.split("/"),function(t){return!!t}),!i).join("/"),t||i||(t="."),t&&a&&(t+="/"),(i?"/":"")+t},n.isAbsolute=function(t){return"/"===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(r(t,function(t){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},n.relative=function(t,e){function r(t){for(var e=0;t.length>e&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var i=r(t.split("/")),a=r(e.split("/")),o=Math.min(i.length,a.length),s=o,u=0;o>u;u++)if(i[u]!==a[u]){s=u;break}for(var l=[],u=s;i.length>u;u++)l.push("..");return l=l.concat(a.slice(s)),l.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(t){var e=a(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(t,e){var n=a(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},n.extname=function(t){return a(t)[3]};var o="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return 0>e&&(e=t.length+e),t.substr(e,n)}}).call(this,t("FWaASH"))},{FWaASH:5}],5:[function(t,e){function n(){}var r=e.exports={};r.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=n,r.addListener=n,r.once=n,r.off=n,r.removeListener=n,r.removeAllListeners=n,r.emit=n,r.binding=function(){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw Error("process.chdir is not supported")}},{}],6:[function(require,module,exports){(function(__dirname){if(fleegix===void 0)var fleegix={};exports.timezoneJS===void 0&&(exports.timezoneJS={}),fs=require("fs"),path=require("path"),utils=require("../src/utils"),exports.timezoneJS.timezone=new function(){function invalidTZError(t){throw Error('Timezone "'+t+'" is either incorrect, or not loaded in the timezone registry.')}function builtInLoadZoneFile(t,e){if(fleegix.xhr===void 0)throw Error("Please use the Fleegix.js XHR module, or define your own transport mechanism for downloading zone files.");var n=_this.zoneFileBasePath+"/"+t;if(e.async)return fleegix.xhr.send({url:n,method:"get",handleSuccess:function(t){return _this.parseZones(t)&&"function"==typeof e.callback&&e.callback(),!0},handleErr:function(){throw Error('Error retrieving "'+n+'" zoneinfo file.')}});var r=fleegix.xhr.doReq({url:n,async:!1});return _this.parseZones(r)}function getRegionForTimezone(t){var e,n=regionExceptions[t];if(n)return n;if(reg=t.split("/")[0],e=regionMap[reg],!e){var r=_this.zones[t];if("string"==typeof r)return getRegionForTimezone(r);if(!_this.loadedZones.backward)return _this.loadZoneFile("backward",!0),getRegionForTimezone(t);invalidTZError(t)}return e}function parseTimeString(t){var e=/(\d+)(?::0*(\d*))?(?::0*(\d*))?([wsugz])?$/,n=t.match(e);return n[1]=parseInt(n[1],10),n[2]=n[2]?parseInt(n[2],10):0,n[3]=n[3]?parseInt(n[3],10):0,n}function getZone(t,e){for(var n=e,r=_this.zones[n];"string"==typeof r;)n=r,r=_this.zones[n];if(!r){if(!_this.loadedZones.backward)return _this.loadZoneFile("backward",!0),getZone(t,e);invalidTZError(n)}for(var i=0;r.length>i;i++){var a=r[i];if(!a[3])break;var o=parseInt(a[3],10),s=11,u=31;a[4]&&(s=monthMap[a[4].substr(0,3).toLowerCase()],u=parseInt(a[5],10));var n=a[6]?a[6]:"23:59:59";n=parseTimeString(n);var l=Date.UTC(o,s,u,n[1],n[2],n[3]);if(l>t.getTime())break}if(i==r.length)throw Error('No Zone found for "'+timezone+'" on '+t);return r[i]}function getBasicOffset(t){var e=parseTimeString(t[0]),n=0==t[0].indexOf("-")?-1:1;return e=n*1e3*(60*(60*e[1]+e[2])+e[3]),-e/60/1e3}function getRule(t,e,n){var r,i=e[1],a=getBasicOffset(e),o=function(t,e,n){var r=0;if("u"==e||"g"==e||"z"==e)r=0;else if("s"==e)r=a;else{if("w"!=e&&e)throw"unknown type "+e;r=getAdjustedOffset(a,n)}return r*=6e4,new Date(t.getTime()+r)},s=function(t,e){var n,r=t[0],i=t[1],a={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},s={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},u=parseTimeString(i[5]);if(isNaN(i[4])){var l,f;"last"===i[4].substr(0,4)?(n=new Date(Date.UTC(r,a[i[3]]+1,1,u[1]-24,u[2],u[3],0)),l=s[i[4].substr(4,3).toLowerCase()],f="<="):(n=new Date(Date.UTC(r,a[i[3]],i[4].substr(5),u[1],u[2],u[3],0)),l=s[i[4].substr(0,3).toLowerCase()],f=i[4].substr(3,2));var c=n.getUTCDay();">="===f?n.setUTCDate(n.getUTCDate()+(l-c+(c>l?7:0))):n.setUTCDate(n.getUTCDate()+(l-c-(l>c?7:0)))}else n=new Date(Date.UTC(r,a[i[3]],i[4],u[1],u[2],u[3],0));return e&&(n=o(n,u[4],e)),n},u=function(t,e){var n=[];for(var r in e)t>=Number(e[r][0])&&(Number(e[r][1])>=t||Number(e[r][0])===t&&"only"===e[r][1]||"max"===e[r][1])&&n.push([t,e[r]]);return n},l=function(t,e,r){return t.constructor!==Date?t=s(t,r):r&&(t=o(t,n?"u":"w",r)),e.constructor!==Date?e=s(e,r):r&&(e=o(e,n?"u":"w",r)),t=Number(t),e=Number(e),t-e},f=t.getUTCFullYear();r=u(f,_this.rules[i]),r.push(t),r.sort(l),2>r.indexOf(t)&&(r=r.concat(u(f-1,_this.rules[i])),r.sort(l));var c=r.indexOf(t);return c>1&&0>l(t,r[c-1],r[c-2][1])?r[c-2][1]:c>0&&r.length-1>c&&l(t,r[c+1],r[c-1][1])>0?r[c+1][1]:0===c?null:r[c-1][1]}function getAdjustedOffset(t,e){var n=e[6],r=parseTimeString(n),i=0==n.indexOf("-")?-1:1,a=i*1e3*(60*(60*r[1]+r[2])+r[3]);return a=a/60/1e3,a-=t,a=-Math.ceil(a)}function getAbbreviation(t,e){var n,r=t[2];if(r.indexOf("%s")>-1){var i;i=e?"-"==e[7]?"":e[7]:"S",n=r.replace("%s",i)}else if(r.indexOf("/")>-1){var a=parseTimeString(e[6]),o=a[1]||a[2]||a[3];n=r.split("/",2)[o?1:0]}else n=r;return n}var _this=this,monthMap={jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11},dayMap={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},regionMap={EST:"northamerica",MST:"northamerica",HST:"northamerica",EST5EDT:"northamerica",CST6CDT:"northamerica",MST7MDT:"northamerica",PST8PDT:"northamerica",America:"northamerica",Pacific:"australasia",Atlantic:"europe",Africa:"africa",Indian:"africa",Antarctica:"antarctica",Asia:"asia",Australia:"australasia",Europe:"europe",WET:"europe",CET:"europe",MET:"europe",EET:"europe"},regionExceptions={"Pacific/Honolulu":"northamerica","Atlantic/Bermuda":"northamerica","Atlantic/Cape_Verde":"africa","Atlantic/St_Helena":"africa","Indian/Kerguelen":"antarctica","Indian/Chagos":"asia","Indian/Maldives":"asia","Indian/Christmas":"australasia","Indian/Cocos":"australasia","America/Danmarkshavn":"europe","America/Scoresbysund":"europe","America/Godthab":"europe","America/Thule":"europe","Asia/Yekaterinburg":"europe","Asia/Omsk":"europe","Asia/Novosibirsk":"europe","Asia/Krasnoyarsk":"europe","Asia/Irkutsk":"europe","Asia/Yakutsk":"europe","Asia/Vladivostok":"europe","Asia/Sakhalin":"europe","Asia/Magadan":"europe","Asia/Kamchatka":"europe","Asia/Anadyr":"europe","Africa/Ceuta":"europe","America/Argentina/Buenos_Aires":"southamerica","America/Argentina/Cordoba":"southamerica","America/Argentina/Tucuman":"southamerica","America/Argentina/La_Rioja":"southamerica","America/Argentina/San_Juan":"southamerica","America/Argentina/Jujuy":"southamerica","America/Argentina/Catamarca":"southamerica","America/Argentina/Mendoza":"southamerica","America/Argentina/Rio_Gallegos":"southamerica","America/Argentina/Ushuaia":"southamerica","America/Aruba":"southamerica","America/La_Paz":"southamerica","America/Noronha":"southamerica","America/Belem":"southamerica","America/Fortaleza":"southamerica","America/Recife":"southamerica","America/Araguaina":"southamerica","America/Maceio":"southamerica","America/Bahia":"southamerica","America/Sao_Paulo":"southamerica","America/Campo_Grande":"southamerica","America/Cuiaba":"southamerica","America/Porto_Velho":"southamerica","America/Boa_Vista":"southamerica","America/Manaus":"southamerica","America/Eirunepe":"southamerica","America/Rio_Branco":"southamerica","America/Santiago":"southamerica","Pacific/Easter":"southamerica","America/Bogota":"southamerica","America/Curacao":"southamerica","America/Guayaquil":"southamerica","Pacific/Galapagos":"southamerica","Atlantic/Stanley":"southamerica","America/Cayenne":"southamerica","America/Guyana":"southamerica","America/Asuncion":"southamerica","America/Lima":"southamerica","Atlantic/South_Georgia":"southamerica","America/Paramaribo":"southamerica","America/Port_of_Spain":"southamerica","America/Montevideo":"southamerica","America/Caracas":"southamerica"};this.zoneFileBasePath,this.zoneFiles=["africa","antarctica","asia","australasia","backward","etcetera","europe","northamerica","pacificnew","southamerica"],this.loadingSchemes={PRELOAD_ALL:"preloadAll",LAZY_LOAD:"lazyLoad",MANUAL_LOAD:"manualLoad"},this.loadingScheme=this.loadingSchemes.PRELOAD_ALL,this.defaultZoneFile=this.loadingScheme==this.loadingSchemes.PRELOAD_ALL?this.zoneFiles:"northamerica",this.loadedZones={},this.zones={},this.rules={},this.init=function(t){var e={async:!0},n=this.defaultZoneFile;for(var r in t)e[r]=t[r];if("string"==typeof n)throw Error("in init def==string");var i;this.loadedZones.africa=!0,i=utils.lzwDecode(fs.readFileSync(__dirname+"/../files/tz/africa.lzw","utf8")),_this.parseZones(i),this.loadedZones.antarctica=!0,i=utils.lzwDecode(fs.readFileSync(__dirname+"/../files/tz/antarctica.lzw","utf8")),_this.parseZones(i),this.loadedZones.asia=!0,i=utils.lzwDecode(fs.readFileSync(__dirname+"/../files/tz/asia.lzw","utf8")),_this.parseZones(i),this.loadedZones.australasia=!0,i=utils.lzwDecode(fs.readFileSync(__dirname+"/../files/tz/australasia.lzw","utf8")),_this.parseZones(i),this.loadedZones.backward=!0,i=utils.lzwDecode(fs.readFileSync(__dirname+"/../files/tz/backward.lzw","utf8")),_this.parseZones(i),this.loadedZones.etcetera=!0,i=utils.lzwDecode(fs.readFileSync(__dirname+"/../files/tz/etcetera.lzw","utf8")),_this.parseZones(i),this.loadedZones.europe=!0,i=utils.lzwDecode(fs.readFileSync(__dirname+"/../files/tz/europe.lzw","utf8")),_this.parseZones(i),this.loadedZones.northamerica=!0,i=utils.lzwDecode(fs.readFileSync(__dirname+"/../files/tz/northamerica.lzw","utf8")),_this.parseZones(i),this.loadedZones.pacificnew=!0,i=utils.lzwDecode(fs.readFileSync(__dirname+"/../files/tz/pacificnew.lzw","utf8")),_this.parseZones(i),this.loadedZones.southamerica=!0,i=utils.lzwDecode(fs.readFileSync(__dirname+"/../files/tz/southamerica.lzw","utf8")),_this.parseZones(i)},this.loadZoneFile=function(t){throw Error("timezone-js is trying to load a timezone file that it does not have: "+t)},this.loadZoneJSONData=function(url,sync){var processData=function(data){data=eval("("+data+")");for(var z in data.zones)_this.zones[z]=data.zones[z];for(var r in data.rules)_this.rules[r]=data.rules[r]};if(sync){var data=fleegix.xhr.doGet(url);processData(data)}else fleegix.xhr.doGet(processData,url)},this.loadZoneDataFromObject=function(t){if(t){for(var e in t.zones)_this.zones[e]=t.zones[e];for(var n in t.rules)_this.rules[n]=t.rules[n]}},this.getAllZones=function(){var t=[];for(z in this.zones)t.push(z);return t.sort()},this.parseZones=function(t){for(var e=t.split("\n"),n=[],r="",i=null,a=null,o=0;e.length>o;o++)if(l=e[o],l.match(/^\s/)&&(l="Zone "+i+l),l=l.split("#")[0],l.length>3)switch(n=l.split(/\s+/),r=n.shift()){case"Zone":i=n.shift(),_this.zones[i]||(_this.zones[i]=[]),_this.zones[i].push(n);break;case"Rule":a=n.shift(),_this.rules[a]||(_this.rules[a]=[]),_this.rules[a].push(n);break;case"Link":if(_this.zones[n[1]])throw Error("Error with Link "+n[1]);_this.zones[n[1]]=n[0];break;case"Leap":break;default:}return!0},this.getTzInfo=function(t,e,n){if(this.loadingScheme==this.loadingSchemes.LAZY_LOAD){var r=getRegionForTimezone(e);if(!r)throw Error("Not a valid timezone ID.");this.loadedZones[r]||this.loadZoneFile(r,!0)}var i=getZone(t,e),a=getBasicOffset(i),o=getRule(t,i,n);o&&(a=getAdjustedOffset(a,o));var s=getAbbreviation(i,o);return{tzOffset:a,tzAbbr:s}}},exports.timezoneJS.parseISO=function(t){var e="^(?:([+-]?[0-9]{4,})(?:-([0-9]{2})(?:-([0-9]{2}))?)?)?(?:T(?:([0-9]{2})(?::([0-9]{2})(?::([0-9]{2})(?:\\.([0-9]{3}))?)?)?)?(Z|[-+][0-9]{2}:[0-9]{2})?)?$",n=t.match(e);if(n){var r={year:n[1]||0,month:n[2]||1,day:n[3]||1,hour:n[4]||0,minute:n[5]||0,second:n[6]||0,milli:n[7]||0,offset:n[8]||"Z"},i=Date.UTC(r.year,r.month-1,r.day,r.hour,r.minute,r.second,r.milli);if("Z"!==r.offset){if(n=r.offset.match("([-+][0-9]{2})(?::([0-9]{2}))?"),!n)return 0/0;var a=1e3*60*60*n[1]+1e3*60*(n[2]||0);i-=a}return new Date(i)}return null}}).call(this,"/node_modules/tztime/lib")},{"../src/utils":10,fs:3,path:4}],7:[function(t,e,n){(function(){function t(t){function e(e,n,r,i,a,o){for(;a>=0&&o>a;a+=t){var s=i?i[a]:a;r=n(r,e[s],s,e)}return r}return function(n,r,i,a){r=w(r,a,4);var o=!k(n)&&T.keys(n),s=(o||n).length,u=t>0?0:s-1;return 3>arguments.length&&(i=n[o?o[u]:u],u+=t),e(n,r,i,o,u,s)}}function r(t){return function(e,n,r){n=_(n,r);for(var i=M(e),a=t>0?0:i-1;a>=0&&i>a;a+=t)if(n(e[a],a,e))return a;return-1}}function i(t,e,n){return function(r,i,a){var o=0,s=M(r);if("number"==typeof a)t>0?o=a>=0?a:Math.max(a+s,o):s=a>=0?Math.min(a+1,s):a+s+1;else if(n&&a&&s)return a=n(r,i),r[a]===i?a:-1;if(i!==i)return a=e(h.call(r,o,s),T.isNaN),a>=0?a+o:-1;for(a=t>0?o:s-1;a>=0&&s>a;a+=t)if(r[a]===i)return a;return-1}}function a(t,e){var n=x.length,r=t.constructor,i=T.isFunction(r)&&r.prototype||l,a="constructor";for(T.has(t,a)&&!T.contains(e,a)&&e.push(a);n--;)a=x[n],a in t&&t[a]!==i[a]&&!T.contains(e,a)&&e.push(a)}var o=this,s=o._,u=Array.prototype,l=Object.prototype,f=Function.prototype,c=u.push,h=u.slice,g=l.toString,d=l.hasOwnProperty,p=Array.isArray,m=Object.keys,y=f.bind,v=Object.create,S=function(){},T=function(t){return t instanceof T?t:this instanceof T?(this._wrapped=t,void 0):new T(t)};n!==void 0?(e!==void 0&&e.exports&&(n=e.exports=T),n._=T):o._=T,T.VERSION="1.8.3";var w=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,a){return t.call(e,n,r,i,a)}}return function(){return t.apply(e,arguments)}},_=function(t,e,n){return null==t?T.identity:T.isFunction(t)?w(t,e,n):T.isObject(t)?T.matcher(t):T.property(t)};T.iteratee=function(t,e){return _(t,e,1/0)};var b=function(t,e){return function(n){var r=arguments.length;if(2>r||null==n)return n;for(var i=1;r>i;i++)for(var a=arguments[i],o=t(a),s=o.length,u=0;s>u;u++){var l=o[u];e&&void 0!==n[l]||(n[l]=a[l])}return n}},F=function(t){if(!T.isObject(t))return{};if(v)return v(t);S.prototype=t;var e=new S;return S.prototype=null,e},O=function(t){return function(e){return null==e?void 0:e[t]}},A=Math.pow(2,53)-1,M=O("length"),k=function(t){var e=M(t);return"number"==typeof e&&e>=0&&A>=e};T.each=T.forEach=function(t,e,n){e=w(e,n);var r,i;if(k(t))for(r=0,i=t.length;i>r;r++)e(t[r],r,t);else{var a=T.keys(t);for(r=0,i=a.length;i>r;r++)e(t[a[r]],a[r],t)}return t},T.map=T.collect=function(t,e,n){e=_(e,n);for(var r=!k(t)&&T.keys(t),i=(r||t).length,a=Array(i),o=0;i>o;o++){var s=r?r[o]:o;a[o]=e(t[s],s,t)}return a},T.reduce=T.foldl=T.inject=t(1),T.reduceRight=T.foldr=t(-1),T.find=T.detect=function(t,e,n){var r;return r=k(t)?T.findIndex(t,e,n):T.findKey(t,e,n),void 0!==r&&-1!==r?t[r]:void 0},T.filter=T.select=function(t,e,n){var r=[];return e=_(e,n),T.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r},T.reject=function(t,e,n){return T.filter(t,T.negate(_(e)),n)},T.every=T.all=function(t,e,n){e=_(e,n);for(var r=!k(t)&&T.keys(t),i=(r||t).length,a=0;i>a;a++){var o=r?r[a]:a;if(!e(t[o],o,t))return!1}return!0},T.some=T.any=function(t,e,n){e=_(e,n);for(var r=!k(t)&&T.keys(t),i=(r||t).length,a=0;i>a;a++){var o=r?r[a]:a;if(e(t[o],o,t))return!0}return!1},T.contains=T.includes=T.include=function(t,e,n,r){return k(t)||(t=T.values(t)),("number"!=typeof n||r)&&(n=0),T.indexOf(t,e,n)>=0},T.invoke=function(t,e){var n=h.call(arguments,2),r=T.isFunction(e);return T.map(t,function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)})},T.pluck=function(t,e){return T.map(t,T.property(e))},T.where=function(t,e){return T.filter(t,T.matcher(e))},T.findWhere=function(t,e){return T.find(t,T.matcher(e))},T.max=function(t,e,n){var r,i,a=-1/0,o=-1/0;if(null==e&&null!=t){t=k(t)?t:T.values(t);for(var s=0,u=t.length;u>s;s++)r=t[s],r>a&&(a=r)}else e=_(e,n),T.each(t,function(t,n,r){i=e(t,n,r),(i>o||i===-1/0&&a===-1/0)&&(a=t,o=i)});return a},T.min=function(t,e,n){var r,i,a=1/0,o=1/0;if(null==e&&null!=t){t=k(t)?t:T.values(t);for(var s=0,u=t.length;u>s;s++)r=t[s],a>r&&(a=r)}else e=_(e,n),T.each(t,function(t,n,r){i=e(t,n,r),(o>i||1/0===i&&1/0===a)&&(a=t,o=i)});return a},T.shuffle=function(t){for(var e,n=k(t)?t:T.values(t),r=n.length,i=Array(r),a=0;r>a;a++)e=T.random(0,a),e!==a&&(i[a]=i[e]),i[e]=n[a];return i},T.sample=function(t,e,n){return null==e||n?(k(t)||(t=T.values(t)),t[T.random(t.length-1)]):T.shuffle(t).slice(0,Math.max(0,e))},T.sortBy=function(t,e,n){return e=_(e,n),T.pluck(T.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}),"value")};var I=function(t){return function(e,n,r){var i={};return n=_(n,r),T.each(e,function(r,a){var o=n(r,a,e);t(i,r,o)}),i}};T.groupBy=I(function(t,e,n){T.has(t,n)?t[n].push(e):t[n]=[e]}),T.indexBy=I(function(t,e,n){t[n]=e}),T.countBy=I(function(t,e,n){T.has(t,n)?t[n]++:t[n]=1}),T.toArray=function(t){return t?T.isArray(t)?h.call(t):k(t)?T.map(t,T.identity):T.values(t):[]},T.size=function(t){return null==t?0:k(t)?t.length:T.keys(t).length},T.partition=function(t,e,n){e=_(e,n);var r=[],i=[];return T.each(t,function(t,n,a){(e(t,n,a)?r:i).push(t)}),[r,i]},T.first=T.head=T.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:T.initial(t,t.length-e)},T.initial=function(t,e,n){return h.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},T.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:T.rest(t,Math.max(0,t.length-e))},T.rest=T.tail=T.drop=function(t,e,n){return h.call(t,null==e||n?1:e)},T.compact=function(t){return T.filter(t,T.identity)};var D=function(t,e,n,r){for(var i=[],a=0,o=r||0,s=M(t);s>o;o++){var u=t[o];if(k(u)&&(T.isArray(u)||T.isArguments(u))){e||(u=D(u,e,n));var l=0,f=u.length;for(i.length+=f;f>l;)i[a++]=u[l++]}else n||(i[a++]=u)}return i};T.flatten=function(t,e){return D(t,e,!1)},T.without=function(t){return T.difference(t,h.call(arguments,1))},T.uniq=T.unique=function(t,e,n,r){T.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=_(n,r));for(var i=[],a=[],o=0,s=M(t);s>o;o++){var u=t[o],l=n?n(u,o,t):u;e?(o&&a===l||i.push(u),a=l):n?T.contains(a,l)||(a.push(l),i.push(u)):T.contains(i,u)||i.push(u)}return i},T.union=function(){return T.uniq(D(arguments,!0,!0))},T.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=M(t);i>r;r++){var a=t[r];if(!T.contains(e,a)){for(var o=1;n>o&&T.contains(arguments[o],a);o++);o===n&&e.push(a)}}return e},T.difference=function(t){var e=D(arguments,!0,!0,1);return T.filter(t,function(t){return!T.contains(e,t)})},T.zip=function(){return T.unzip(arguments)},T.unzip=function(t){for(var e=t&&T.max(t,M).length||0,n=Array(e),r=0;e>r;r++)n[r]=T.pluck(t,r);return n},T.object=function(t,e){for(var n={},r=0,i=M(t);i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},T.findIndex=r(1),T.findLastIndex=r(-1),T.sortedIndex=function(t,e,n,r){n=_(n,r,1);for(var i=n(e),a=0,o=M(t);o>a;){var s=Math.floor((a+o)/2);i>n(t[s])?a=s+1:o=s}return a},T.indexOf=i(1,T.findIndex,T.sortedIndex),T.lastIndexOf=i(-1,T.findLastIndex),T.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),a=0;r>a;a++,t+=n)i[a]=t;return i};var C=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var a=F(t.prototype),o=t.apply(a,i);return T.isObject(o)?o:a};T.bind=function(t,e){if(y&&t.bind===y)return y.apply(t,h.call(arguments,1));if(!T.isFunction(t))throw new TypeError("Bind must be called on a function");var n=h.call(arguments,2),r=function(){return C(t,r,e,this,n.concat(h.call(arguments)))};return r},T.partial=function(t){var e=h.call(arguments,1),n=function(){for(var r=0,i=e.length,a=Array(i),o=0;i>o;o++)a[o]=e[o]===T?arguments[r++]:e[o];for(;arguments.length>r;)a.push(arguments[r++]);return C(t,n,this,this,a)};return n},T.bindAll=function(t){var e,n,r=arguments.length;if(1>=r)throw Error("bindAll must be passed function names");for(e=1;r>e;e++)n=arguments[e],t[n]=T.bind(t[n],t);return t},T.memoize=function(t,e){var n=function(r){var i=n.cache,a=""+(e?e.apply(this,arguments):r);return T.has(i,a)||(i[a]=t.apply(this,arguments)),i[a]};return n.cache={},n},T.delay=function(t,e){var n=h.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},T.defer=T.partial(T.delay,T,1),T.throttle=function(t,e,n){var r,i,a,o=null,s=0;n||(n={});var u=function(){s=n.leading===!1?0:T.now(),o=null,a=t.apply(r,i),o||(r=i=null)};return function(){var l=T.now();s||n.leading!==!1||(s=l);var f=e-(l-s);return r=this,i=arguments,0>=f||f>e?(o&&(clearTimeout(o),o=null),s=l,a=t.apply(r,i),o||(r=i=null)):o||n.trailing===!1||(o=setTimeout(u,f)),a}},T.debounce=function(t,e,n){var r,i,a,o,s,u=function(){var l=T.now()-o;e>l&&l>=0?r=setTimeout(u,e-l):(r=null,n||(s=t.apply(a,i),r||(a=i=null)))};return function(){a=this,i=arguments,o=T.now();var l=n&&!r;return r||(r=setTimeout(u,e)),l&&(s=t.apply(a,i),a=i=null),s}},T.wrap=function(t,e){return T.partial(e,t)},T.negate=function(t){return function(){return!t.apply(this,arguments)}},T.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},T.after=function(t,e){return function(){return 1>--t?e.apply(this,arguments):void 0}},T.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=null),n}},T.once=T.partial(T.before,2);var B=!{toString:null}.propertyIsEnumerable("toString"),x=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];T.keys=function(t){if(!T.isObject(t))return[];if(m)return m(t);var e=[];for(var n in t)T.has(t,n)&&e.push(n);return B&&a(t,e),e},T.allKeys=function(t){if(!T.isObject(t))return[];var e=[];for(var n in t)e.push(n);return B&&a(t,e),e},T.values=function(t){for(var e=T.keys(t),n=e.length,r=Array(n),i=0;n>i;i++)r[i]=t[e[i]];return r},T.mapObject=function(t,e,n){e=_(e,n);for(var r,i=T.keys(t),a=i.length,o={},s=0;a>s;s++)r=i[s],o[r]=e(t[r],r,t);return o},T.pairs=function(t){for(var e=T.keys(t),n=e.length,r=Array(n),i=0;n>i;i++)r[i]=[e[i],t[e[i]]];return r},T.invert=function(t){for(var e={},n=T.keys(t),r=0,i=n.length;i>r;r++)e[t[n[r]]]=n[r];return e},T.functions=T.methods=function(t){var e=[];for(var n in t)T.isFunction(t[n])&&e.push(n);return e.sort()},T.extend=b(T.allKeys),T.extendOwn=T.assign=b(T.keys),T.findKey=function(t,e,n){e=_(e,n);for(var r,i=T.keys(t),a=0,o=i.length;o>a;a++)if(r=i[a],e(t[r],r,t))return r},T.pick=function(t,e,n){var r,i,a={},o=t;if(null==o)return a;T.isFunction(e)?(i=T.allKeys(o),r=w(e,n)):(i=D(arguments,!1,!1,1),r=function(t,e,n){return e in n},o=Object(o));for(var s=0,u=i.length;u>s;s++){var l=i[s],f=o[l];r(f,l,o)&&(a[l]=f)}return a},T.omit=function(t,e,n){if(T.isFunction(e))e=T.negate(e);else{var r=T.map(D(arguments,!1,!1,1),String);e=function(t,e){return!T.contains(r,e)}}return T.pick(t,e,n)},T.defaults=b(T.allKeys,!0),T.create=function(t,e){var n=F(t);return e&&T.extendOwn(n,e),n},T.clone=function(t){return T.isObject(t)?T.isArray(t)?t.slice():T.extend({},t):t},T.tap=function(t,e){return e(t),t},T.isMatch=function(t,e){var n=T.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),a=0;r>a;a++){var o=n[a];if(e[o]!==i[o]||!(o in i))return!1}return!0};var E=function(t,e,n,r){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof T&&(t=t._wrapped),e instanceof T&&(e=e._wrapped);var i=g.call(t);if(i!==g.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var a="[object Array]"===i;if(!a){if("object"!=typeof t||"object"!=typeof e)return!1;var o=t.constructor,s=e.constructor;if(o!==s&&!(T.isFunction(o)&&o instanceof o&&T.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===t)return r[u]===e;if(n.push(t),r.push(e),a){if(u=t.length,u!==e.length)return!1;for(;u--;)if(!E(t[u],e[u],n,r))return!1}else{var l,f=T.keys(t);if(u=f.length,T.keys(e).length!==u)return!1;for(;u--;)if(l=f[u],!T.has(e,l)||!E(t[l],e[l],n,r))return!1}return n.pop(),r.pop(),!0};T.isEqual=function(t,e){return E(t,e)},T.isEmpty=function(t){return null==t?!0:k(t)&&(T.isArray(t)||T.isString(t)||T.isArguments(t))?0===t.length:0===T.keys(t).length},T.isElement=function(t){return!(!t||1!==t.nodeType)},T.isArray=p||function(t){return"[object Array]"===g.call(t)},T.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},T.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){T["is"+t]=function(e){return g.call(e)==="[object "+t+"]"}}),T.isArguments(arguments)||(T.isArguments=function(t){return T.has(t,"callee")}),"object"!=typeof Int8Array&&(T.isFunction=function(t){return"function"==typeof t||!1}),T.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},T.isNaN=function(t){return T.isNumber(t)&&t!==+t},T.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===g.call(t)},T.isNull=function(t){return null===t},T.isUndefined=function(t){return void 0===t},T.has=function(t,e){return null!=t&&d.call(t,e)},T.noConflict=function(){return o._=s,this},T.identity=function(t){return t},T.constant=function(t){return function(){return t}},T.noop=function(){},T.property=O,T.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},T.matcher=T.matches=function(t){return t=T.extendOwn({},t),function(e){return T.isMatch(e,t)}},T.times=function(t,e,n){var r=Array(Math.max(0,t));e=w(e,n,1);for(var i=0;t>i;i++)r[i]=e(i);return r},T.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},T.now=Date.now||function(){return(new Date).getTime()};var P={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},z=T.invert(P),L=function(t){var e=function(e){return t[e]},n="(?:"+T.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};T.escape=L(P),T.unescape=L(z),T.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),T.isFunction(r)?r.call(t):r};var R=0;T.uniqueId=function(t){var e=++R+"";return t?t+e:e},T.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var V=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},q=/\\|'|\r|\n|\u2028|\u2029/g,j=function(t){return"\\"+N[t]};T.template=function(t,e,n){!e&&n&&(e=n),e=T.defaults({},e,T.templateSettings);var r=RegExp([(e.escape||V).source,(e.interpolate||V).source,(e.evaluate||V).source].join("|")+"|$","g"),i=0,a="__p+='";t.replace(r,function(e,n,r,o,s){return a+=t.slice(i,s).replace(q,j),i=s+e.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(a+="';\n"+o+"\n__p+='"),e}),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var o=Function(e.variable||"obj","_",a)}catch(s){throw s.source=a,s}var u=function(t){return o.call(this,t,T)},l=e.variable||"obj";return u.source="function("+l+"){\n"+a+"}",u},T.chain=function(t){var e=T(t);return e._chain=!0,e};var Z=function(t,e){return t._chain?T(e).chain():e};T.mixin=function(t){T.each(T.functions(t),function(e){var n=T[e]=t[e];T.prototype[e]=function(){var t=[this._wrapped];return c.apply(t,arguments),Z(this,n.apply(T,t))}})},T.mixin(T),T.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=u[t];T.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],Z(this,n)}}),T.each(["concat","join","slice"],function(t){var e=u[t];T.prototype[t]=function(){return Z(this,e.apply(this._wrapped,arguments))}}),T.prototype.value=function(){return this._wrapped},T.prototype.valueOf=T.prototype.toJSON=T.prototype.value,T.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return T})}).call(this)},{}],8:[function(t,e,n){(function(){var e,r,i,a=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;
return-1};i=t("./utils"),r=t("../lib/timezone-js.js").timezoneJS,e=function(){function t(e,n,r){var o,s,u,l,f,c,h,g,d,p,m,y,v;switch(this.beforePastFlag="",i.type(e)){case"string":if(y=e,":"===y.slice(-3,-2)&&(g=y.slice(-6,-5),a.call("+-",g)>=0)||"Z"===y.slice(-1)){if(null==r)throw Error("Must provide a tz parameter when instantiating a Time object with ISOString that contains timeshift/timezone specification. You provided: "+y+".");if(":"===y.slice(-3,-2)&&(d=y.slice(-6,-5),a.call("+-",d)>=0))throw Error("tzTime.Time does not know how to deal with time shifted ISOStrings like what you sent: "+y);"Z"===y.slice(-1)&&(y=y.slice(0,-1)),f=new t(y,"millisecond"),s=f.getJSDateFromGMTInTZ(r)}else this._setFromString(y,n),r=void 0;break;case"number":h=e,null!=r?(f=new t(h,"millisecond"),s=f.getJSDateFromGMTInTZ(r)):this._setFromRDN(h,n);break;case"date":s=e,null!=r&&(f=new t(s,"millisecond"),s=f.getJSDateFromGMTInTZ(r)),null==r&&(r="GMT");break;case"object":for(o={},o.granularity=e.granularity,o.beforePastFlag=e.beforePastFlag,p=t._granularitySpecs[e.granularity].segments,u=0,l=p.length;l>u;u++)v=p[u],o[v]=e[v];null!=r?(o.granularity="millisecond",f=new t(o),s=f.getJSDateFromGMTInTZ(r)):this._setFromConfig(o)}if(null!=r){if("BEFORE_FIRST"===(m=this.beforePastFlag)||"PAST_LAST"===m)throw Error("Cannot do timezone manipulation on "+this.beforePastFlag);null!=n&&(this.granularity=n),null==this.granularity&&(this.granularity="millisecond"),c={year:s.getUTCFullYear(),month:s.getUTCMonth()+1,day:s.getUTCDate(),hour:s.getUTCHours(),minute:s.getUTCMinutes(),second:s.getUTCSeconds(),millisecond:s.getUTCMilliseconds(),granularity:"millisecond"},f=new t(c).inGranularity(this.granularity),this._setFromConfig(f)}this._inBoundsCheck(),this._overUnderFlow()}var e,n,o;t._granularitySpecs={},t._granularitySpecs.millisecond={segments:["year","month","day","hour","minute","second","millisecond"],mask:"####-##-##T##:##:##.###",lowest:0,rolloverValue:function(){return 1e3}},t._granularitySpecs.second={segments:["year","month","day","hour","minute","second"],mask:"####-##-##T##:##:##",lowest:0,rolloverValue:function(){return 60}},t._granularitySpecs.minute={segments:["year","month","day","hour","minute"],mask:"####-##-##T##:##",lowest:0,rolloverValue:function(){return 60}},t._granularitySpecs.hour={segments:["year","month","day","hour"],mask:"####-##-##T##",lowest:0,rolloverValue:function(){return 24}},t._granularitySpecs.day={segments:["year","month","day"],mask:"####-##-##",lowest:1,rolloverValue:function(t){return t.daysInMonth()+1}},t._granularitySpecs.month={segments:["year","month"],mask:"####-##",lowest:1,rolloverValue:function(){return 13}},t._granularitySpecs.year={segments:["year"],mask:"####",lowest:1,rolloverValue:function(){return 1e4}},t._granularitySpecs.week={segments:["year","week"],mask:"####W##",lowest:1,rolloverValue:function(t){return t.is53WeekYear()?54:53}},t._granularitySpecs.week_day={segments:["year","week","week_day"],mask:"####W##-#",lowest:1,rolloverValue:function(){return 8}},t._granularitySpecs.quarter={segments:["year","quarter"],mask:"####Q#",lowest:1,rolloverValue:function(){return 5}},t._expandMask=function(t){var e,n,r,i;if(r=t.mask,null!=r){if(r.indexOf("#")>=0){for(n=r.length-1;"#"!==r.charAt(n);)n--;for(i=n;"#"===r.charAt(n);)n--;return t.segmentStart=n+1,t.segmentLength=i-n,t.regex=RegExp(function(){var t,n,i,a;for(i=r.split(""),a=[],t=0,n=i.length;n>t;t++)e=i[t],a.push("#"===e?"\\d":e);return a}().join(""))}return t.regex=RegExp(r)}},n=t._granularitySpecs;for(e in n)o=n[e],t._expandMask(o),t[e.toUpperCase()]=e;return r.timezone.zoneFileBasePath="../files/tz",r.timezone.init(),t.prototype._inBoundsCheck=function(){var e,n,r,i,a,o,s,u,l;if(""===this.beforePastFlag||null==this.beforePastFlag){if(!this.granularity)throw Error("@granularity should be set before _inBoundsCheck is ever called.");for(u=t._granularitySpecs[this.granularity].segments,a=[],n=0,r=u.length;r>n;n++)if(s=u[n],e=t._granularitySpecs[s],l=this[s],i=e.lowest,o=e.rolloverValue(this),i>l||l>=o)if(l===i-1)this[s]++,a.push(this.decrement(s));else{if(l!==o)throw Error("Tried to set "+s+" to "+l+". It must be >= "+i+" and < "+o);this[s]--,a.push(this.increment(s))}else a.push(void 0);return a}},t.prototype._setFromConfig=function(e){var n,r,a,o,s;for(i.assert(null!=e.granularity,"A granularity property must be part of the supplied config."),this.granularity=e.granularity,this.beforePastFlag=null!=e.beforePastFlag?e.beforePastFlag:"",s=t._granularitySpecs[this.granularity].segments,a=[],n=0,r=s.length;r>n;n++)o=s[n],null!=e[o]?a.push(this[o]=e[o]):a.push(this[o]=t._granularitySpecs[o].lowest);return a},t.prototype._setFromString=function(n,r){var i,a,s,u,l,f,c,h,g,d,p,m,y,v;if("PAST_LAST"===n||"BEFORE_FIRST"===n){if(null!=r)return this.granularity=r,this.beforePastFlag=n,void 0;throw Error("PAST_LAST/BEFORE_FIRST must have a granularity")}if(h=n.split(" "),"this"===(l=h[0])||"next"===l||"previous"===l)return y="in"===h[2]&&null!=h[3]?h[3]:void 0,v=new t(new Date,h[1],y),this._setFromConfig(v),"next"===h[0]?this.increment():"previous"===h[0]&&this.decrement(),void 0;f=t._granularitySpecs;for(e in f)if(o=f[e],(o.segmentStart+o.segmentLength===n.length||0>o.mask.indexOf("#"))&&o.regex.test(n)){r=e;break}if(null==r)throw Error("Error parsing string '"+n+"'. Couldn't identify granularity.");for(this.granularity=r,d=t._granularitySpecs[this.granularity].segments,p=!0,c=[],a=0,u=d.length;u>a;a++)g=d[a],p&&(i=t._granularitySpecs[g],s=i.segmentLength,m=t._getStringPart(n,g),m.length!==s&&(p=!1)),p?c.push(this[g]=Number(m)):c.push(this[g]=t._granularitySpecs[g].lowest);return c},t._getStringPart=function(e,n){var r,i,a;return o=t._granularitySpecs[n],r=o.segmentLength,i=o.segmentStart,a=e.substr(i,r)},t.prototype._setFromRDN=function(n,r){var a,o,s,u,l,f,c,h,g,d,p,m,y,v,S,T,w,_,b,F,O,A,M,k,I,D,C;switch(g={granularity:r},i.assert(null!=r,"Must provide a granularity when constructing with a Rata Die Number."),r){case"week":case"week_day":return k=Math.floor((n-1)/7),d=(n-1)%7,F=Math.floor(k/20871),k%=20871,C=k+(k>=10435?1:0),h=Math.floor(C/5218),k=C%5218,I=28*k+[15,23,3,11][h],D=Math.floor(I/1461),k=I%1461,g.year=D+400*F+100*h+1,g.week=Math.floor(k/28)+1,g.week_day=d+1,this._setFromConfig(g);case"year":case"month":case"day":case"hour":case"minute":case"second":case"millisecond":case"quarter":return a=n+1721425,T=a+32044,e=Math.floor(T/146097),v=T%146097,h=Math.floor(3*(Math.floor(v/36524)+1)/4),y=v-36524*h,l=Math.floor(y/1461),m=y%1461,o=Math.floor(3*(Math.floor(m/365)+1)/4),p=m-365*o,D=400*e+100*h+4*l+o,b=Math.floor((5*p+308)/153)-2,d=p-Math.floor(153*(b+4)/5)+122,g.year=D-4800+Math.floor((b+2)/12),g.month=(b+2)%12+1,g.day=Math.floor(d)+1,g.quarter=Math.floor((g.month-1)/3)+1,this._setFromConfig(g);default:for(S=t._granularitySpecs[r],M={granularity:r},O=S.segments,w=0,_=O.length;_>w;w++)A=O[w],M[A]=t._granularitySpecs[A].lowest;if(f=new t(M),c=f.rataDieNumber(),s=f.add(1),u=s.rataDieNumber(),c>n)return this.beforePastFlag="BEFORE_FIRST",void 0;for(;;){if(u>n&&n>=c)return this._setFromConfig(f),void 0;if(f=s,c=u,s=f.add(1),u=s.rataDieNumber(),"PAST_LAST"===s.beforePastFlag){if(n>=t._granularitySpecs[f.granularity].endBeforeDay.rataDieNumber())return this._setFromConfig(s),"PAST_LAST"===this.beforePastFlag,void 0;if(n>=c)return this._setFromConfig(f),void 0;throw Error("RDN: "+n+" seems to be out of range for "+r)}}throw Error("Something went badly wrong setting custom granularity "+r+" for RDN: "+n)}},t.prototype._isGranularityCoarserThanDay=function(){var e,n,r,i;for(r=t._granularitySpecs[this.granularity].segments,e=0,n=r.length;n>e;e++)if(i=r[e],i.indexOf("day")>=0)return!1;return!0},t.prototype.getJSDate=function(t){var e,n,a,o;return"PAST_LAST"===this.beforePastFlag?new Date(9999,0,1):"BEFORE_FIRST"===this.beforePastFlag?new Date("0001-01-01"):(i.assert(null!=t,"Must provide a timezone when calling getJSDate"),e=this.inGranularity("millisecond"),o=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond),a=r.timezone.getTzInfo(new Date(o),t).tzOffset,o+=60*1e3*a,n=new Date(o))},t.prototype.getISOStringInTZ=function(e){var n;return i.assert(null!=e,"Must provide a timezone when calling getShiftedISOString"),n=this.getJSDate(e),t.getISOStringFromJSDate(n)},t.getISOStringFromJSDate=function(e){var n,r,i,a,o,s,u,l;return null==e&&(e=new Date),l=e.getUTCFullYear(),o=e.getUTCMonth()+1,n=e.getUTCDate(),r=e.getUTCHours(),a=e.getUTCMinutes(),u=e.getUTCSeconds(),i=e.getUTCMilliseconds(),s=t._pad(l,4)+"-"+t._pad(o,2)+"-"+t._pad(n,2)+"T"+t._pad(r,2)+":"+t._pad(a,2)+":"+t._pad(u,2)+"."+t._pad(i,3)+"Z"},t.prototype.getJSDateFromGMTInTZ=function(t){var e,n,a,o;return"PAST_LAST"===this.beforePastFlag?new Date(9999,0,1):"BEFORE_FIRST"===this.beforePastFlag?new Date("0001-01-01"):(i.assert(null!=t,"Must provide a timezone when calling getJSDate"),e=this.inGranularity("millisecond"),o=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond),a=r.timezone.getTzInfo(new Date(o),t).tzOffset,o-=60*1e3*a,n=new Date(o))},t.prototype.getSegmentsAsObject=function(){var e,n,r,i,a;for(a=t._granularitySpecs[this.granularity].segments,r={},e=0,n=a.length;n>e;e++)i=a[e],r[i]=this[i];return r},t.prototype.getSegmentsAsArray=function(){var e,n,r,i,a;for(a=t._granularitySpecs[this.granularity].segments,e=[],n=0,r=a.length;r>n;n++)i=a[n],e.push(this[i]);return e},t.prototype.toString=function(){var e,n,r,i,a,o,s,u,l,f,c;if("BEFORE_FIRST"===(s=this.beforePastFlag)||"PAST_LAST"===s)u=""+this.beforePastFlag;else for(u=t._granularitySpecs[this.granularity].mask,f=t._granularitySpecs[this.granularity].segments,i=0,o=f.length;o>i;i++)l=f[i],r=t._granularitySpecs[l],a=r.segmentLength,c=r.segmentStart,n=u.slice(0,c),e=u.slice(c+a),u=n+t._pad(this[l],a)+e;return u},t._pad=function(t,e){var n;for(n=""+t;e>n.length;)n="0"+n;return n},t.DOW_N_TO_S_MAP={0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday",7:"Sunday"},t.MONTH_TO_S_MAP={1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},t.DOW_MONTH_TABLE=[0,3,2,5,0,3,5,1,4,6,2,4],t.prototype.dowNumber=function(){var e,n,r;return"week_day"===this.granularity?this.week_day:"day"===(n=this.granularity)||"hour"===n||"minute"===n||"second"===n||"millisecond"===n?(r=this.year,3>this.month&&r--,e=(r+Math.floor(r/4)-Math.floor(r/100)+Math.floor(r/400)+t.DOW_MONTH_TABLE[this.month-1]+this.day)%7,0===e?7:e):this.inGranularity("day").dowNumber()},t.prototype.dowString=function(){return t.DOW_N_TO_S_MAP[this.dowNumber()]},t.prototype.monthString=function(){return t.MONTH_TO_S_MAP[this.month]},t.prototype.rataDieNumber=function(){var e,n,r,a;if("BEFORE_FIRST"===this.beforePastFlag)return-1;if("PAST_LAST"===this.beforePastFlag)return i.MAX_INT;if(null!=t._granularitySpecs[this.granularity].rataDieNumber)return t._granularitySpecs[this.granularity].rataDieNumber(this);switch(r=this.year-1,a=365*r+Math.floor(r/4)-Math.floor(r/100)+Math.floor(r/400),e=Math.floor((a+3)/7),null!=this.month?(n=[0,31,59,90,120,151,181,212,243,273,304,334][this.month-1],this.isLeapYear()&&this.month>=3&&n++):null!=this.quarter?(n=[0,90,181,273][this.quarter-1],this.isLeapYear()&&this.quarter>=2&&n++):n=0,this.granularity){case"year":return a+1;case"month":case"quarter":return a+n+1;case"day":case"hour":case"minute":case"second":case"millisecond":return a+n+this.day;case"week":return 7*(e+this.week-1)+1;case"week_day":return 7*(e+this.week-1)+this.week_day}},t.prototype.inGranularity=function(e){var n,r,i;return"year"!==(r=this.granularity)&&"month"!==r&&"day"!==r&&"hour"!==r&&"minute"!==r&&"second"!==r&&"millisecond"!==r||"year"!==e&&"month"!==e&&"day"!==e&&"hour"!==e&&"minute"!==e&&"second"!==e&&"millisecond"!==e?new t(this.rataDieNumber(),e):(i=this.granularity,this.granularity=e,n=new t(this),this.granularity=i,n)},t.prototype.daysInMonth=function(){switch(this.month){case 4:case 6:case 9:case 11:return 30;case 1:case 3:case 5:case 7:case 8:case 10:case 12:case 0:return 31;case 2:return this.isLeapYear()?29:28}},t.prototype.isLeapYear=function(){return 0===this.year%4?0===this.year%100?0===this.year%400?!0:!1:!0:!1},t.YEARS_WITH_53_WEEKS=[4,9,15,20,26,32,37,43,48,54,60,65,71,76,82,88,93,99,105,111,116,122,128,133,139,144,150,156,161,167,172,178,184,189,195,201,207,212,218,224,229,235,240,246,252,257,263,268,274,280,285,291,296,303,308,314,320,325,331,336,342,348,353,359,364,370,376,381,387,392,398],t.prototype.is53WeekYear=function(){var e;return e=this.year%400,a.call(t.YEARS_WITH_53_WEEKS,e)>=0},t.prototype.equal=function(e){var n,r,a,o;if(i.assert(this.granularity===e.granularity,"Granulary of "+this+" does not match granularity of "+e+" on equality/inequality test"),"PAST_LAST"===this.beforePastFlag&&"PAST_LAST"===e.beforePastFlag)return!0;if("BEFORE_FIRST"===this.beforePastFlag&&"BEFORE_FIRST"===e.beforePastFlag)return!0;if("PAST_LAST"===this.beforePastFlag&&"PAST_LAST"!==e.beforePastFlag)return!1;if("BEFORE_FIRST"===this.beforePastFlag&&"BEFORE_FIRST"!==e.beforePastFlag)return!1;if("PAST_LAST"===e.beforePastFlag&&"PAST_LAST"!==this.beforePastFlag)return!1;if("BEFORE_FIRST"===e.beforePastFlag&&"BEFORE_FIRST"!==this.beforePastFlag)return!1;for(o=t._granularitySpecs[this.granularity].segments,n=0,r=o.length;r>n;n++)if(a=o[n],this[a]!==e[a])return!1;return!0},t.prototype.greaterThan=function(e){var n,r,a,o;if(i.assert(this.granularity===e.granularity,"Granulary of "+this+" does not match granularity of "+e+" on equality/inequality test"),"PAST_LAST"===this.beforePastFlag&&"PAST_LAST"===e.beforePastFlag)return!1;if("BEFORE_FIRST"===this.beforePastFlag&&"BEFORE_FIRST"===e.beforePastFlag)return!1;if("PAST_LAST"===this.beforePastFlag&&"PAST_LAST"!==e.beforePastFlag)return!0;if("BEFORE_FIRST"===this.beforePastFlag&&"BEFORE_FIRST"!==e.beforePastFlag)return!1;if("PAST_LAST"===e.beforePastFlag&&"PAST_LAST"!==this.beforePastFlag)return!1;if("BEFORE_FIRST"===e.beforePastFlag&&"BEFORE_FIRST"!==this.beforePastFlag)return!0;for(o=t._granularitySpecs[this.granularity].segments,n=0,r=o.length;r>n;n++){if(a=o[n],this[a]>e[a])return!0;if(this[a]<e[a])return!1}return!1},t.prototype.greaterThanOrEqual=function(t){var e;return e=this.greaterThan(t),e?!0:this.equal(t)},t.prototype.lessThan=function(t){return t.greaterThan(this)},t.prototype.lessThanOrEqual=function(t){return t.greaterThanOrEqual(this)},t.prototype._overUnderFlow=function(){var e,n,r,i,a,o,s;return"BEFORE_FIRST"===(a=this.beforePastFlag)||"PAST_LAST"===a?!0:(e=t._granularitySpecs[this.granularity],n=e.segments[0],r=t._granularitySpecs[n],s=this[n],o=r.rolloverValue(this),i=r.lowest,s>=o?(this.beforePastFlag="PAST_LAST",!0):i>s?(this.beforePastFlag="BEFORE_FIRST",!0):!1)},t.prototype.decrement=function(e){var n,r,i,a,o,s,u,l,f;if("PAST_LAST"===this.beforePastFlag){for(this.beforePastFlag="",n=t._granularitySpecs[this.granularity],f=n.segments,u=[],a=0,s=f.length;s>a;a++)l=f[a],r=t._granularitySpecs[l],u.push(this[l]=r.rolloverValue(this)-1);return u}if(o=this.day===this.daysInMonth(),null==e&&(e=this.granularity),n=t._granularitySpecs[e],f=n.segments,this[e]--,"year"===e)this.day>this.daysInMonth()&&(this.day=this.daysInMonth());else{for(i=f.length-1,l=f[i],n=t._granularitySpecs[l];i>0&&this[l]<n.lowest;)this[f[i-1]]--,this[l]=n.rolloverValue(this)-1,i--,l=f[i],n=t._granularitySpecs[l];"month"===e&&"month"!==this.granularity&&(o||this.day>this.daysInMonth())&&(this.day=this.daysInMonth())}return this._overUnderFlow(),this},t.prototype.increment=function(e){var n,r,i,a,o,s,u,l,f;if("BEFORE_FIRST"===this.beforePastFlag){for(this.beforePastFlag="",n=t._granularitySpecs[this.granularity],f=n.segments,u=[],a=0,s=f.length;s>a;a++)l=f[a],r=t._granularitySpecs[l],u.push(this[l]=r.lowest);return u}if(o=this.day===this.daysInMonth(),null==e&&(e=this.granularity),n=t._granularitySpecs[e],f=n.segments,this[e]++,"year"===e)this.day>this.daysInMonth()&&(this.day=this.daysInMonth());else{for(i=f.length-1,l=f[i],n=t._granularitySpecs[l];i>0&&this[l]>=n.rolloverValue(this);)this[l]=n.lowest,this[f[i-1]]++,i--,l=f[i],n=t._granularitySpecs[l];"month"===e&&"month"!==this.granularity&&(o||this.day>this.daysInMonth())&&(this.day=this.daysInMonth())}return this._overUnderFlow(),this},t.prototype.addInPlace=function(t,e){return null==e&&(e=this.granularity),0===t?this:(1===t?this.increment(e):t>1?(this.increment(e),this.addInPlace(t-1,e)):-1===t?this.decrement(e):(this.decrement(e),this.addInPlace(t+1,e)),this)},t.prototype.add=function(e,n){var r;return r=new t(this),r.addInPlace(e,n),r},t.addGranularity=function(n){var r;r=[];for(e in n)o=n[e],t._expandMask(o),this._granularitySpecs[e]=o,r.push(t[e.toUpperCase()]=e);return r},t}(),n.Time=e}).call(this)},{"../lib/timezone-js.js":6,"./utils":10}],9:[function(t,e,n){(function(){var e,r,i,a,o,s=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};e=t("./Time").Time,a=t("./../lib/timezone-js.js").timezoneJS,o=t("./utils"),r=function(){function t(t){var n,r,i,a,s,u,l,f,c;if(this.memoizedTicks={},null!=t.endBefore&&(this.endBefore=t.endBefore,"PAST_LAST"!==this.endBefore&&("string"===o.type(this.endBefore)&&(this.endBefore=new e(this.endBefore)),this.granularity=this.endBefore.granularity)),null!=t.startOn&&(this.startOn=t.startOn,"BEFORE_FIRST"!==this.startOn&&("string"===o.type(this.startOn)&&(this.startOn=new e(this.startOn)),this.granularity=this.startOn.granularity)),null!=t.granularity&&(this.granularity=t.granularity,null!=this.startOn&&(this.startOn=this.startOn.inGranularity(this.granularity)),null!=this.endBefore&&(this.endBefore=this.endBefore.inGranularity(this.granularity))),!this.granularity)throw Error("Cannot determine granularity for Timeline.");for("BEFORE_FIRST"===this.startOn&&(this.startOn=new e(this.startOn,this.granularity)),"PAST_LAST"===this.endBefore&&this.endBefore===new e(this.endBefore,this.granularity),this.endBefore||(this.endBefore=new e("PAST_LAST",this.granularity)),this.startOn||(this.startOn=new e("BEFORE_FIRST",this.granularity)),this.limit=null!=t.limit?t.limit:o.MAX_INT,this.workDays=null!=t.workDays?t.workDays:null!=t.workdays?t.workdays:["Monday","Tuesday","Wednesday","Thursday","Friday"],"string"===o.type(this.workDays)&&(this.workDays=function(){var t,e,n,r;for(n=this.workDays.split(","),r=[],t=0,e=n.length;e>t;t++)c=n[t],r.push(o.trim(c));return r}.call(this)),this.holidays=null!=t.holidays?t.holidays:[],l=this.holidays,i=a=0,s=l.length;s>a;i=++a)r=l[i],"string"===o.type(r)&&(this.holidays[i]=new e(r).getSegmentsAsObject());this.workDayStartOn=null!=t.workDayStartOn?t.workDayStartOn:void 0,null!=this.workDayStartOn?(n=null!=this.workDayStartOn.hour?this.workDayStartOn.hour:0,u=null!=this.workDayStartOn.minute?this.workDayStartOn.minute:0,this.startOnWorkMinutes=60*n+u,0>this.startOnWorkMinutes&&(this.startOnWorkMinutes=0)):this.startOnWorkMinutes=0,this.workDayEndBefore=null!=t.workDayEndBefore?t.workDayEndBefore:void 0,null!=this.workDayEndBefore?(n=null!=this.workDayEndBefore.hour?this.workDayEndBefore.hour:24,u=null!=this.workDayEndBefore.minute?this.workDayEndBefore.minute:0,this.endBeforeWorkMinutes=60*n+u,this.endBeforeWorkMinutes>1440&&(this.endBeforeWorkMinutes=1440)):this.endBeforeWorkMinutes=1440,this.step=null!=t.step?t.step:null!=t.endBefore&&(null!=(f=this.startOn)?f.greaterThan(this.endBefore):void 0)?-1:null!=t.endBefore&&null==t.startOn&&null!=t.limit?-1:1,o.assert(null!=t.startOn&&null!=t.endBefore||null!=t.startOn&&null!=t.limit&&this.step>0||null!=t.endBefore&&null!=t.limit&&0>this.step,'Must provide two out of "startOn", "endBefore", or "limit" and the sign of step must match.')}return t.prototype.getIterator=function(t,e,n){return null==t&&(t="Time"),new i(this,t,e,n)},t.prototype.getAllRaw=function(t,e,n){var r,i;for(null==t&&(t="Time"),i=this.getIterator(t,e,n),r=[];i.hasNext();)r.push(i.next());return r},t.prototype.getAll=function(t,n,r){var i,a,s;return null==t&&(t="Time"),a={tickType:t},null!=n&&(a.tz=n),null!=r&&(a.childGranularity=r),i=JSON.stringify(a),s=this.memoizedTicks[i],null==s&&(s=this.getAllRaw(t,n,r),s.length>1&&(s[0]instanceof e&&s[0].greaterThan(s[1])||"string"===o.type(s[0])&&s[0]>s[1])&&s.reverse(),this.memoizedTicks[i]=s),s},t.prototype.ticksThatIntersect=function(t,n,r){var i,a,s,u,l,f,c;if(o.assert(this.limit===o.MAX_INT,"Cannot call `ticksThatIntersect()` on Timelines specified with `limit`."),u=[],"string"===o.type(t))if(o.assert("string"===o.type(n),"The type for startOn and endBefore must match."),s=/\d\d\d\d-\d\d-\d\dT\d\d:\d\d:\d\d.\d\d\dZ/,o.assert(s.test(t),"startOn must be in form ####-##-##T##:##:##.###Z"),o.assert(s.test(n),"endBefore must be in form ####-##-##T##:##:##.###Z"),o.assert(null!=r,"Must specify parameter tz when submitting ISO string boundaries."),f=this.getAll("ISOString",r),f[0]>=n||t>f[f.length-1])u=[];else{for(a=0,c=f.length;c>a&&t>f[a];)a++;for(;c>a&&n>f[a];)u.push(f[a]),a++}else{if(!(t instanceof e))throw Error("startOn must be a String or a Time object.");if(o.assert(n instanceof e,"The type for startOn and endBefore must match."),t=t.inGranularity(this.granularity),n=n.inGranularity(this.granularity),this.endBefore.lessThan(this.startOn)?(l=this.endBefore,i=this.startOn):(l=this.startOn,i=this.endBefore),l.greaterThanOrEqual(n)||i.lessThan(t))u=[];else{for(f=this.getAll(),a=0,c=f.length;c>a&&f[a].lessThan(t);)a++;for(;c>a&&f[a].lessThan(n);)u.push(f[a]),a++}}return u},t.prototype.contains=function(t,n){var r,i,s;if(o.assert(this.limit===o.MAX_INT,"Cannot call `contains()` on Timelines specified with `limit`."),t instanceof e)return t.lessThan(this.endBefore)&&t.greaterThanOrEqual(this.startOn);switch(o.assert(null!=n||"date"!==o.type(t),"Timeline.contains() requires a second parameter (timezone) when the first parameter is a Date()"),o.type(t)){case"string":if(null==n)return s=new e(t),s.lessThan(this.endBefore)&&s.greaterThanOrEqual(this.startOn);s=a.parseISO(t);break;case"date":s=t.getTime();break;default:throw Error("Timeline.contains() requires that the first parameter be of type Time, String, or Date")}return i=this.startOn.getJSDate(n),r=this.endBefore.getJSDate(n),r>s&&s>=i},t}(),i=function(){function t(t,e,n,i){var a;this.tickType=null!=e?e:"Time",this.childGranularity=i,o.assert("Time"===(a=this.tickType)||"Timeline"===a||"Date"===a||"ISOString"===a,"tickType must be 'Time', 'Timeline', 'Date', or 'ISOString'. You provided "+this.tickType+"."),o.assert("Date"!==this.tickType||null!=n,"Must provide a tz (timezone) parameter when tickType is Date."),o.assert("ISOString"!==this.tickType||null!=n,"Must provide a tz (timezone) parameter when returning ISOStrings."),null==this.tz&&(this.tz=n),this.timeline=t instanceof r?t:new r(t),null==this.childGranularity&&(this.childGranularity=t.granularity),this.reset()}var n,i;return n=n===void 0?o.StopIteration:n,t.prototype.reset=function(){return this.timeline.step>0?this.current=new e(this.timeline.startOn):(this.current=new e(this.timeline.endBefore),this.current.decrement()),this.count=0,this._proceedToNextValid()},i=function(t,e,n){return t.lessThan(n)&&t.greaterThanOrEqual(e)},t.prototype.hasNext=function(){return i(this.current,this.timeline.startOn,this.timeline.endBefore)&&this.count<this.timeline.limit},t.prototype._shouldBeExcluded=function(){var t,e,n,r,i,a,u,l;if(this.current._isGranularityCoarserThanDay())return!1;if(t=this.current.inGranularity("day"),a=this.current.dowString(),0>s.call(this.timeline.workDays,a))return!0;for(u=this.timeline.holidays,r=0,i=u.length;i>r;r++)if(n=u[r],o.match(n,t))return!0;if("hour"===(l=this.timeline.granularity)||"minute"===l||" second"===l||"millisecond"===l)if(e=60*this.current.hour,null!=this.current.minute&&(e+=this.current.minute),this.timeline.startOnWorkMinutes<=this.timeline.endBeforeWorkMinutes){if(this.timeline.startOnWorkMinutes>e||e>=this.timeline.endBeforeWorkMinutes)return!0}else if(this.timeline.startOnWorkMinutes>=e&&e>this.timeline.endBeforeWorkMinutes)return!0;return!1},t.prototype._proceedToNextValid=function(){var t;for(t=[];this.hasNext()&&this._shouldBeExcluded();)this.timeline.step>0?t.push(this.current.increment()):t.push(this.current.decrement());return t},t.prototype.next=function(){var t,i,a,o,s,u;if(!this.hasNext())throw new n("Cannot call next() past end.");for(a=new e(this.current),this.count++,o=s=u=Math.abs(this.timeline.step);1>=u?1>=s:s>=1;o=1>=u?++s:--s)this.timeline.step>0?this.current.increment():this.current.decrement(),this._proceedToNextValid();switch(this.tickType){case"Time":return a;case"Date":return a.getJSDate(this.tz);case"ISOString":return a.getISOStringInTZ(this.tz);case"Timeline":return i={startOn:a.inGranularity(this.childGranularity),endBefore:this.current.inGranularity(this.childGranularity),workDays:this.timeline.workDays,holidays:this.timeline.holidays,workDayStartOn:this.timeline.workDayStartOn,workDayEndBefore:this.timeline.workDayEndBefore},t=new r(i);default:throw Error("You asked for tickType "+this.tickType+". Only 'Time', 'Date', 'ISOString', and 'Timeline' are allowed.")}},t}(),n.Timeline=r,n.TimelineIterator=i}).call(this)},{"./../lib/timezone-js.js":6,"./Time":8,"./utils":10}],10:[function(t,e,n){(function(){var e,r,i,a,o,s,u,l,f,c,h,g,d,p,m,y,v,S,T,w=function(t,e){function n(){this.constructor=t}for(var r in e)_.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},_={}.hasOwnProperty;n.MAX_INT=2147483647,n.MIN_INT=-2147483648,r=function(t){function e(t){this.message=null!=t?t:"Unknown error.",null!=Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}return w(e,t),e.prototype.toString=function(){return this.name+": "+this.message},e}(Error),e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return w(e,t),e}(r),i=function(t,e){if(!t)throw new n.AssertException(e)},m=function(t,e){var n,r;for(n in t)if(r=t[n],r!==e[n])return!1;return!0},l=function(t,e){var n,r,i,a;if(t===e)return!0;if(n=typeof t,r=typeof e,n!==r)return!1;if(!t&&e||t&&!e)return!1;if("object"!==n)return!1;if(t.length&&t.length!==e.length)return!1;for(i in t)if(a=t[i],!(i in e&&l(a,e[i])))return!1;return!0},f=function(t,e){var n,r;if("object"!==S(t)||"object"!==S(e))throw Error("obj1 and obj2 must both be objects when calling filterMatch");for(n in t)if(r=t[n],!l(r,e[n]))return!1;return!0},v=function(t){return null!=String.prototype.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},y=function(t,e){return t.substring(0,e.length)===e},c=function(t){return"[object Array]"===Object.prototype.toString.apply(t)},S=function(){var t,e,n,r,i;for(t={},i="Boolean Number String Function Array Date RegExp Undefined Null".split(" "),e=0,n=i.length;n>e;e++)r=i[e],t["[object "+r+"]"]=r.toLowerCase();return function(e){var n;return n=Object.prototype.toString.call(e),t[n]||"object"}}(),a=function(t){var e,n,r;if(null==t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return e="",null!=t.global&&(e+="g"),null!=t.ignoreCase&&(e+="i"),null!=t.multiline&&(e+="m"),null!=t.sticky&&(e+="y"),RegExp(t.source,e);r=new t.constructor;for(n in t)r[n]=a(t[n]);return r},h=Object.keys||function(t){var e,n;return function(){var r;r=[];for(e in t)n=t[e],r.push(e);return r}()},T=function(t){var e,n;return function(){var r;r=[];for(e in t)n=t[e],r.push(n);return r}()},g=function(t){var e;return null!=("undefined"!=typeof document&&null!==document?document.createElement:void 0)?(e=document.createElement("pre"),e.innerHTML=t,document.body.appendChild(e)):console.log(t)},o=function(t,e){var n,r,i,a,o,s;if(null===t)return 1;if(null===e)return-1;switch(S(t)){case"number":case"boolean":case"date":return e-t;case"array":for(i=a=0,o=t.length;o>a;i=++a){if(s=t[i],e.length-1>=i&&e[i]>s)return 1;if(e.length-1>=i&&s>e[i])return-1}return t.length<e.length?1:t.length>e.length?-1:0;case"object":case"string":return n=JSON.stringify(t),r=JSON.stringify(e),r>n?1:n>r?-1:0;default:throw Error("Do not know how to sort objects of type "+utils.type(t)+".")}},u=function(t){return unescape(encodeURIComponent(t))},s=function(t){return decodeURIComponent(escape(t))},p=function(t){var e,n,r,i,a,o,s;for(t=u(t),i={},r=(t+"").split(""),o=[],n=void 0,s=r[0],e=256,a=1;r.length>a;)n=r[a],null!=i[s+n]?s+=n:(o.push(s.length>1?i[s]:s.charCodeAt(0)),i[s+n]=e,e++,s=n),a++;for(o.push(s.length>1?i[s]:s.charCodeAt(0)),a=0;o.length>a;)o[a]=String.fromCharCode(o[a]),a++;return o.join("")},d=function(t){var e,n,r,i,a,o,u,l,f,c;for(a={},i=(t+"").split(""),n=i[0],u=n,l=[n],e=256,c=void 0,o=1;i.length>o;)r=i[o].charCodeAt(0),c=256>r?i[o]:a[r]?a[r]:u+n,l.push(c),n=c.charAt(0),a[e]=u+n,e++,u=c,o++;return f=l.join(""),s(f)},n.log=g,n.AssertException=e,n.assert=i,n.match=m,n.filterMatch=f,n.trim=v,n.startsWith=y,n.isArray=c,n.type=S,n.clone=a,n.keys=h,n.values=T,n.compare=o,n.lzwEncode=p,n.lzwDecode=d,n._=t("underscore")}).call(this)},{underscore:7}],11:[function(t,e,n){(function(){var e;n.Time=t("./src/Time").Time,e=t("./src/Timeline"),n.TimelineIterator=e.TimelineIterator,n.Timeline=e.Timeline,n.utils=t("./src/utils")}).call(this)},{"./src/Time":8,"./src/Timeline":9,"./src/utils":10}],12:[function(t,e,n){(function(){var e,r,i,a,o,s=function(t,e){function n(){this.constructor=t}for(var r in e)u.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;a=t("./functions").functions,o=t("tztime").utils,i=t("./OLAPCube").OLAPCube,r=function(){function t(){}return t.getBucketCountMinMax=function(t){var e,n,r;if(r=Math.floor(Math.sqrt(t.length))+1,3>r)throw Error("Need more training data");return n=a.min(t),e=a.max(t),{targetBucketCount:r,min:n,max:e}},t.generateConstantWidthBucketer=function(e){var n,r,i,a,o,s,u,l,f;for(u=t.getBucketCountMinMax(e),f=u.targetBucketCount,s=u.min,o=u.max,n=(o-s)/f,r=[],r.push({value:"B0",startOn:null,endBelow:s+n}),i=a=1,l=f-2;l>=1?l>=a:a>=l;i=l>=1?++a:--a)r.push({value:"B"+i,startOn:s+n*i,endBelow:s+n*(i+1)});return r.push({value:"B"+(f-1),startOn:s+n*(f-1),endBelow:null}),r},t.generateConstantQuantityBucketer=function(e){var n,r,i,o,s,u,l,f,c,h,g;for(c=t.getBucketCountMinMax(e),g=c.targetBucketCount,f=c.min,l=c.max,n=100/g,r=[],i=a.percentileCreator(n)(e),r.push({value:"B0",startOn:null,endBelow:i}),o=s=1,h=g-2;h>=1?h>=s:s>=h;o=h>=1?++s:--s)u=i,i=a.percentileCreator(n*(o+1))(e),r.push({value:"B"+o,startOn:u,endBelow:i});return r.push({value:"B"+(g-1),startOn:i,endBelow:null}),r},t.splitAt=function(t,e){var n,r;return n=t.slice(0,e),r=t.slice(e),{left:n,right:r}},t.optimalSplitFor2Buckets=function(e){var n,r,i,o,s,u,l,f,c,h,g,d;for(n=1,o=Number.MAX_VALUE,s=u=1,f=e.length-1;f>=1?f>=u:u>=f;s=f>=1?++u:--u)c=t.splitAt(e,s),l=c.left,h=c.right,d=a.errorSquared(l)+a.errorSquared(h),o>d&&(o=d,n=s,r=l,i=h);return g=(e[n-1]+e[n])/2,{splitAt:g,left:r,right:i}},t.areAllSame=function(t){var e,n,r,i;for(e=t[0],n=0,r=t.length;r>n;n++)if(i=t[n],i!==e)return!1;return!0},t.findBucketSplits=function(e,n,r){var i,a,o,s;return 5>n.length||t.areAllSame(n)?null:(a=t.optimalSplitFor2Buckets(n),s=a.splitAt,i=a.left,o=a.right,e.push(s),r>e.length&&(t.findBucketSplits(e,i,r),t.findBucketSplits(e,o,r)),e)},t.generateVOptimalBucketer=function(e){var n,r,i,a,o,s,u,l,f,c,h;for(l=t.getBucketCountMinMax(e),h=l.targetBucketCount,u=l.min,s=l.max,e.sort(function(t,e){return t-e}),c=[],t.findBucketSplits(c,e,h),c.sort(function(t,e){return t-e}),n=[],r=c[0],n.push({value:"B0",startOn:null,endBelow:r}),i=a=1,f=c.length-1;f>=1?f>=a:a>=f;i=f>=1?++a:--a)o=r,r=c[i],n.push({value:"B"+i,startOn:o,endBelow:r});return n.push({value:"B"+c.length,startOn:r,endBelow:null}),n},t.prototype.discreteizeRow=function(t){var e,n,r,i,a,o,s,u,l,f;for(u=this.features,i=0,o=u.length;o>i;i++)if(n=u[i],"continuous"===n.type){if(f=t[n.field],null==f)throw Error("Could not find field "+n.field+" in "+JSON.stringify(t)+".");for(l=n.bins,r=a=0,s=l.length;s>a;r=++a)if(e=l[r],null!=e.startOn){if(null!=e.endBelow){if(f>=e.startOn&&e.endBelow>f){t[n.field]=e.value;
break}}else if(f>=e.startOn){t[n.field]=e.value;break}}else if(e.endBelow>f){t[n.field]=e.value;break}}return t},t}(),e=function(t){function e(t){this.userConfig=t,this.config=o.clone(this.userConfig),this.outputField=this.config.outputField,this.features=this.config.features}return s(e,t),e.prototype.train=function(t){var e,n,a,s,u,l,f,c,h,g,d,p,m,y,v,S,T,w,_,b,F,O,A,M,k,I,D,C,B,x,E,P,z,L,R,V,N,q,j,Z,W,J,U,G,H,Y,K;for(G=o.clone(t),B=[{field:this.outputField}],E=new i({dimensions:B},G),this.outputValues=E.getDimensionValues(this.outputField),this.outputFieldTypeIsNumber=!0,V=this.outputValues,p=0,v=V.length;v>p;p++)H=V[p],"number"!==o.type(H)&&(this.outputFieldTypeIsNumber=!1);for(k=G.length,d={},this.baseProbabilities={},N=this.outputValues,m=0,S=N.length;S>m;m++)x=N[m],d[this.outputField]=x,s=E.getCell(d)._count,this.baseProbabilities[x]=s/k;for(n=k>=144?r.generateConstantQuantityBucketer:r.generateVOptimalBucketer,q=this.features,y=0,T=q.length;T>y;y++)if(c=q[y],"continuous"===c.type)Y=function(){var t,e,n;for(n=[],e=0,t=G.length;t>e;e++)J=G[e],n.push(J[c.field]);return n}(),a=n(Y),c.bins=a;else if("discrete"!==c.type)throw Error("Unrecognized feature type: "+c.type+".");for(M=0,w=G.length;w>M;M++)J=G[M],this.discreteizeRow(J);for(j=this.features,C=0,_=j.length;_>C;C++)for(c=j[C],f=[{field:this.outputField,keepTotals:!0}],f.push({field:c.field}),h=new i({dimensions:f},G),g=h.getDimensionValues(c.field),"discrete"===c.type&&(c.bins=function(){var t,e,n;for(n=[],e=0,t=g.length;t>e;e++)H=g[e],n.push({value:H});return n}()),Z=c.bins,L=0,b=Z.length;b>L;L++)for(e=Z[L],e.probabilities={},W=this.outputValues,R=0,F=W.length;F>R;R++)x=W[R],d={},d[c.field]=e.value,l=h.getCell(d),u=null!=l?l._count:0,d[this.outputField]=x,D=h.getCell(d),I=0|(null!=D?D._count:void 0),e.probabilities[x]=I/u;for(G=o.clone(t),K=0,A=0,U=0,O=G.length;O>U;U++)J=G[U],z=this.predict(J),z===J[this.outputField]?K++:A++;return P=K/(K+A)},e.prototype.predict=function(t,e){var n,r,i,a,o,s,u,l,f,c,h,g,d,p,m;null==e&&(e=!1),t=this.discreteizeRow(t),h={},d=this.baseProbabilities;for(f in d)g=d[f],h[f]=g;for(p=this.features,i=0,o=p.length;o>i;i++){for(r=p[i],u=null,m=r.bins,a=0,s=m.length;s>a;a++)if(n=m[a],t[r.field]===n.value){u=n;break}if(null==u)throw Error("No matching bin for "+r.field+"="+t[r.field]+" in the training set.");for(f in h)g=h[f],h[f]=g*u.probabilities[f]/(g*u.probabilities[f]+(1-g)*(1-u.probabilities[f]))}l=0,c=null;for(f in h)g=h[f],g>l&&(l=g,c=f);return e?h:this.outputFieldTypeIsNumber?Number(c):c},e.prototype.getStateForSaving=function(t){var e;return e={userConfig:this.userConfig,outputField:this.outputField,outputValues:this.outputValues,outputFieldTypeIsNumber:this.outputFieldTypeIsNumber,baseProbabilities:this.baseProbabilities,features:this.features},null!=t&&(e.meta=t),e},e.newFromSavedState=function(t){var n;return"string"===o.type(t)&&(t=JSON.parse(t)),n=new e(t.userConfig),n.outputField=t.outputField,n.outputValues=t.outputValues,n.outputFieldTypeIsNumber=t.outputFieldTypeIsNumber,n.baseProbabilities=t.baseProbabilities,n.features=t.features,null!=t.meta&&(n.meta=t.meta),n},e}(r),n.Classifier=r,n.BayesianClassifier=e}).call(this)},{"./OLAPCube":13,"./functions":23,tztime:11}],13:[function(t,e,n){(function(){var e,r,i,a,o,s;s=t("tztime").utils,a=t("./functions").functions,o=t("../"),r=o.arrayOfMaps_To_CSVStyleArray,i=o.csvStyleArray_To_ArrayOfMaps,e=function(){function t(t,e){var n,r,i,o,u,l,f,c,h,g,d,p,m,y,v,S,T,w;for(this.userConfig=t,this.config=s.clone(this.userConfig),this.cells=[],this.cellIndex={},this.currentValues={},null!=this.config.groupBy&&(this.config.dimensions=[{field:this.config.groupBy}],null!=this.config.f&&null!=this.config.field&&(this.config.metrics=[{field:this.config.field,f:this.config.f}])),s.assert(null!=this.config.dimensions,"Must provide config.dimensions."),null==this.config.metrics&&(this.config.metrics=[]),this._dimensionValues={},p=this.config.dimensions,r=0,l=p.length;l>r;r++)n=p[r],this._dimensionValues[n.field]={};for(this.config.keepTotals||(this.config.keepTotals=!1),this.config.keepFacts||(this.config.keepFacts=!1),m=this.config.dimensions,i=0,f=m.length;f>i;i++)n=m[i],n.keepTotals=this.config.keepTotals||n.keepTotals?!0:!1;for(a.expandMetrics(this.config.metrics,!0,!0),T={},y=this.config.metrics,u=0,c=y.length;c>u;u++)g=y[u],(null!=(v=g.field)?v.length:void 0)>0&&(T[g.field]=null);for(this.requiredMetricsFields=function(){var t;t=[];for(o in T)w=T[o],t.push(o);return t}(),T={},S=this.config.dimensions,d=0,h=S.length;h>d;d++)n=S[d],T[n.field]=null;this.requiredDimensionFields=function(){var t;t=[];for(o in T)w=T[o],t.push(o);return t}(),this.summaryMetrics={},this.addFacts(e)}return t._possibilities=function(t,e,n){var r,i;switch(s.type(t)){case"array":if(r=n?[null]:[],"hierarchy"===e)for(i=t.length;i>0;)r.push(t.slice(0,i)),i--;else r=n?[null].concat(t):t;return r;case"string":case"number":return n?[null,t]:[t]}},t._decrement=function(t,e){var n;for(n=t.length-1,t[n]--;0>t[n];){if(t[n]=e[n],n--,0>n)return!1;t[n]--}return!0},t.prototype._expandFact=function(e){var n,r,i,a,o,s,u,l,f,c,h,g,d,p,m,y,v,S,T,w,_,b;for(v=[],n=[],b=[],S=this.config.dimensions,a=0,u=S.length;u>a;a++)r=S[a],y=t._possibilities(e[r.field],r.type,r.keepTotals),void 0===y&&console.log(e),v.push(y),n.push(y.length-1),b.push(y.length-1);for(T=this.config.metrics,o=0,l=T.length;l>o;o++)h=T[o],this.currentValues[h.field]=[e[h.field]];for(p=[],g=!0;g;){for(m={},w=this.config.dimensions,i=s=0,f=w.length;f>s;i=++s)r=w[i],m[r.field]=v[i][n[i]];for(m._count=1,this.config.keepFacts&&(m._facts=[e]),_=this.config.metrics,d=0,c=_.length;c>d;d++)h=_[d],m[h.as]=h.f([e[h.field]],void 0,void 0,m,h.field+"_");p.push(m),g=t._decrement(n,b)}return p},t._extractFilter=function(t,e){var n,r,i,a;for(a={},r=0,i=e.length;i>r;r++)n=e[r],a[n.field]=t[n.field];return a},t.prototype._mergeExpandedFactArray=function(e){var n,r,i,a,o,s,u,l,f,c,h,g,d,p,m;for(m=[],o=0,l=e.length;l>o;o++){for(r=e[o],d=this.config.dimensions,s=0,f=d.length;f>s;s++)n=d[s],i=r[n.field],this._dimensionValues[n.field][JSON.stringify(i)]=i;if(a=JSON.stringify(t._extractFilter(r,this.config.dimensions)),g=this.cellIndex[a],null!=g)for(p=this.config.metrics,u=0,c=p.length;c>u;u++)h=p[u],g[h.as]=h.f(g[h.field+"_values"],g[h.as],this.currentValues[h.field],g,h.field+"_");else g=r,this.cellIndex[a]=g,this.cells.push(g);m.push(this.dirtyRows[a]=g)}return m},t.prototype.addFacts=function(t){var e,n,r,i,a,o,u,l,f,c,h,g,d,p,m,y,v;if(this.dirtyRows={},"array"===s.type(t)){if(0>=t.length)return}else{if(null==t)return;t=[t]}if(this.config.deriveFieldsOnInput)for(u=0,c=t.length;c>u;u++)for(i=t[u],m=this.config.deriveFieldsOnInput,l=0,h=m.length;h>l;l++)e=m[l],a=null!=e.as?e.as:e.field,i[a]=e.f(i);for(f=0,g=t.length;g>f;f++)i=t[f],this.addMissingFields(i),this.currentValues={},r=this._expandFact(i),this._mergeExpandedFactArray(r);if(null!=this.config.deriveFieldsOnOutput){y=this.dirtyRows;for(o in y)for(n=y[o],v=this.config.deriveFieldsOnOutput,p=0,d=v.length;d>p;p++)e=v[p],a=null!=e.as?e.as:e.field,n[a]=e.f(n)}return this.dirtyRows={},this},t.prototype.addMissingFields=function(t){var e,n,r,i,a,o,s;for(o=this.requiredMetricsFields,n=0,i=o.length;i>n;n++)e=o[n],void 0===t[e]&&(t[e]=null);for(s=this.requiredDimensionFields,r=0,a=s.length;a>r;r++)e=s[r],null==t[e]&&(t[e]="<missing>");return t},t.prototype.getCells=function(t){var e,n,r,i,a;if(null==t)return this.cells;for(i=[],a=this.cells,n=0,r=a.length;r>n;n++)e=a[n],s.filterMatch(t,e)&&i.push(e);return i},t.prototype.getCell=function(t,e){var n,r,i,a,o,s,u,l,f,c,h,g;null==t&&(t={});for(s in t){for(g=t[s],i=!1,c=this.config.dimensions,a=0,u=c.length;u>a;a++)r=c[a],r.field===s&&(i=!0);if(!i)throw Error(s+" is not a dimension for this cube.")}for(f={},h=this.config.dimensions,o=0,l=h.length;l>o;o++)if(r=h[o],t.hasOwnProperty(r.field))f[r.field]=t[r.field];else{if(!r.keepTotals)throw Error("Must set keepTotals to use getCell with a partial filter.");f[r.field]=null}return n=this.cellIndex[JSON.stringify(f)],null!=n?n:e},t.prototype.getDimensionValues=function(t,e){var n;return null==e&&(e=!1),n=s.values(this._dimensionValues[t]),n.sort(s.compare),e||n.reverse(),n},t.roundToSignificance=function(t,e){var n;return null==e?t:(n=1/e,Math.floor(t*n)/n)},t.prototype.toString=function(t,e,n,r){return null==n&&(n="_count"),1===this.config.dimensions.length?this.toStringOneDimension(this.config.dimensions[0].field,n,r):this.toStringTwoDimensions(t,e,n,r)},t.prototype.toStringOneDimension=function(e,n,r){var i,a,o,s,u,l,f,c,h,g,d,p,m,y,v,S;for(y=this.getDimensionValues(e),m=function(){var t,e,n;for(n=[],t=0,e=y.length;e>t;t++)d=y[t],n.push(JSON.stringify(d));return n}(),p=Math.max.apply({},function(){var t,e,n;for(n=[],t=0,e=m.length;e>t;t++)v=m[t],n.push(v.length);return n}()),p=Math.max(p,"Total".length,e.length),g=n.length,S=[],u=l=0,c=y.length;c>l;u=++l)d=y[u],o={},o[e]=d,i=this.getCell(o),a=null!=i?JSON.stringify(t.roundToSignificance(i[n],r)):"",g=Math.max(g,a.length),S.push(a);for(g+=1,s=p+g+4,v="| "+t._padToWidth(e,p," ",!0)+" |",v+=t._padToWidth(n,g)+" |",v+="\n|"+t._padToWidth("",s,"=")+"|",u=f=0,h=m.length;h>f;u=++f)d=m[u],v+="\n| ",v+="null"===d?t._padToWidth("Total",p," ",!0):t._padToWidth(d,p," ",!0),v+=" |"+t._padToWidth(S[u],g)+" |","null"===d&&(v+="\n|"+t._padToWidth("",s,"-")+"|");return v},t.prototype.toStringTwoDimensions=function(e,n,r,i){var a,o,s,u,l,f,c,h,g,d,p,m,y,v,S,T,w,_,b,F,O,A,M,k,I,D,C;for(null==e&&(e=this.config.dimensions[0].field),null==n&&(n=this.config.dimensions[1].field),k=this.getDimensionValues(e),l=this.getDimensionValues(n),M=function(){var t,e,n;for(n=[],t=0,e=k.length;e>t;t++)O=k[t],n.push(JSON.stringify(O));return n}(),u=function(){var t,e,n;for(n=[],t=0,e=l.length;e>t;t++)a=l[t],n.push(JSON.stringify(a));return n}(),A=Math.max.apply({},function(){var t,e,n;for(n=[],t=0,e=M.length;e>t;t++)I=M[t],n.push(I.length);return n}()),A=Math.max(A,"Total".length),D=[],_=Math.max.apply({},function(){var t,e,n;for(n=[],t=0,e=u.length;e>t;t++)I=u[t],n.push(I.length);return n}()),_=Math.max(_,"Total".length),g=d=0,y=k.length;y>d;g=++d){for(O=k[g],C=[],h=p=0,v=l.length;v>p;h=++p)a=l[h],f={},f[e]=O,f[n]=a,o=this.getCell(f),s=null!=o?JSON.stringify(t.roundToSignificance(o[r],i)):"",_=Math.max(_,s.length),C.push(s);D.push(C)}for(_+=1,I="|"+t._padToWidth("",A)+" ||",h=m=0,S=u.length;S>m;h=++m)a=u[h],I+="null"===a?t._padToWidth("Total",_)+" |":t._padToWidth(a,_);for(c=A+_*u.length+3,"null"===u[0]&&(c+=2),I+="|\n|"+t._padToWidth("",c,"="),g=b=0,T=M.length;T>b;g=++b){for(O=M[g],I+="|\n|",I+="null"===O?t._padToWidth("Total",A," ",!0):t._padToWidth(O,A," ",!0),I+=" ||",h=F=0,w=u.length;w>F;h=++F)a=u[h],I+=t._padToWidth(D[g][h],_),"null"===a&&(I+=" |");"null"===O&&(I+="|\n|"+t._padToWidth("",c,"-"))}return I+="|"},t.prototype.slice=function(e,n,r,i){var a,o,s,u,l,f,c,h,g,d,p,m,y,v,S,T,w,_;for(null==e&&(e=this.config.dimensions[0].field),null==n&&(n=this.config.dimensions[1].field),S=this.getDimensionValues(e),u=this.getDimensionValues(n),w=[],T=[],T.push("x"),f=h=0,p=u.length;p>h;f=++h)a=u[f],null===a?T.push("Total"):T.push(a);for(w.push(T),c=g=0,m=S.length;m>g;c=++g){for(v=S[c],_=[],null===v?_.push("Total"):_.push(v),f=d=0,y=u.length;y>d;f=++d)a=u[f],l={},l[e]=v,l[n]=a,o=this.getCell(l),s=null!=o?t.roundToSignificance(o[r],i):null,_.push(s);w.push(_)}return w},t._padToWidth=function(t,e,n,r){var i;return null==n&&(n=" "),null==r&&(r=!1),t.length>e?t.substr(0,e):(i=Array(e-t.length+1).join(n),r?t+i:i+t)},t.prototype.getStateForSaving=function(t){var e;return e={config:this.userConfig,cells:this.cells,summaryMetrics:this.summaryMetrics},null!=t&&(e.meta=t),e},t.newFromSavedState=function(e){var n,r,a,o,u,l,f,c,h,g,d,p,m,y;for("string"===s.type(e)&&(e=JSON.parse(e)),r=new t(e.config),r.summaryMetrics=e.summaryMetrics,null!=e.meta&&(r.meta=e.meta),r.cells=null!=e.cellsAsCSVStyleArray?i(e.cellsAsCSVStyleArray):e.cells,r.cellIndex={},r._dimensionValues={},p=r.config.dimensions,l=0,h=p.length;h>l;l++)a=p[l],r._dimensionValues[a.field]={};for(m=r.cells,f=0,g=m.length;g>f;f++)for(n=m[f],u=JSON.stringify(t._extractFilter(n,r.config.dimensions)),r.cellIndex[u]=n,y=r.config.dimensions,c=0,d=y.length;d>c;c++)a=y[c],o=n[a.field],r._dimensionValues[a.field][JSON.stringify(o)]=o;return r},t}(),n.OLAPCube=e}).call(this)},{"../":"wlmLJI","./functions":23,tztime:11}],14:[function(t,e,n){(function(){var t;t=function(){function t(t){var e,n,r,i,a,o,s,u,l,f,c,h;if(this.config=t,null!=this.config.histogram)this.table=this.config.histogram;else{if(null==this.config.distribution)throw Error("Must provide either a histogram or distribution in your config.");this.table=this.config.distribution}for(null==this.config.frequencyField&&(null!=this.config.histogram?this.config.frequencyField="count":null!=this.config.distribution&&(this.config.frequencyField="p")),null==this.config.returnValueField&&(null!=this.config.histogram?this.config.returnValueField="label":null!=this.config.distribution&&(this.config.returnValueField="value")),h=0,l=this.table,n=0,a=l.length;a>n;n++)u=l[n],h+=u[this.config.frequencyField];for(f=this.table,r=0,o=f.length;o>r;r++)u=f[r],u._p=u[this.config.frequencyField]/h;for(e=0,c=this.table,i=0,s=c.length;s>i;i++)u=c[i],e+=u._p,u._pCumulative=e}return t.prototype.getRow=function(){var t,e,n,r,i;for(n=Math.random(),i=this.table,t=0,e=i.length;e>t;t++)if(r=i[t],r._pCumulative>n)return r;return this.table[this.table.length-1]},t.prototype.get=function(){return this.getRow()[this.config.returnValueField]},t}(),n.RandomPicker=t}).call(this)},{}],15:[function(t,e,n){(function(){var e,r,i,a,o,s,u,l,f,c=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};u=t("tztime"),f=u.utils,i=u.Time,s=t("./functions").functions,l=t("./dataTransform"),a=l.arrayOfMaps_To_CSVStyleArray,o=l.csvStyleArray_To_ArrayOfMaps,e="9999-01-01T00:00:00.000Z",r=function(){function t(t,e){this.userConfig=t,this.config=f.clone(this.userConfig),null==this.config.uniqueIDField&&(this.config.uniqueIDField="_EntityID"),null==this.config.validFromField&&(this.config.validFromField="_ValidFrom"),null==this.config.validToField&&(this.config.validToField="_ValidTo"),null==this.config.tz&&(this.config.tz="GMT"),null==this.config.defaultValues&&(this.config.defaultValues={}),this.config.defaultValues[this.config.validFromField]=""+new i(1,i.MILLISECOND),null==this.config.idField&&(this.config.idField="_id"),this.snapshots=[],this.fields=[this.config.validFromField,this.config.validToField,"_PreviousValues",this.config.uniqueIDField],this.lastValidFrom=""+new i(1,i.MILLISECOND),this.byUniqueID={},this.addSnapshots(e)}return t.prototype.addSnapshots=function(t){var n,r,a,o,s,u,l,h,g,d,p;for(t=f._.sortBy(t,this.config.validFromField),r=0,o=t.length;o>r;r++){if(l=t[r],h=l[this.config.uniqueIDField],f.assert(null!=h,"Missing "+this.config.uniqueIDField+" field in submitted snapshot: \n"+JSON.stringify(l,null,2)),n=this.byUniqueID[h],null==n&&(n={snapshots:[],lastSnapshot:this.config.defaultValues},this.byUniqueID[h]=n),l[this.config.validFromField]<n.lastSnapshot[this.config.validFromField])throw Error("Got a new snapshot for a time earlier than the prior last snapshot for "+this.config.uniqueIDField+" "+h+".");if(l[this.config.validFromField]===n.lastSnapshot[this.config.validFromField])for(a in l)p=l[a],n.lastSnapshot[a]=p;else{g=l[this.config.validFromField],g=new i(g,null,this.config.tz).getISOStringInTZ(this.config.tz),f.assert(g>=n.lastSnapshot[this.config.validFromField],"validFromField ("+g+") must be >= lastValidFrom ("+n.lastSnapshot[this.config.validFromField]+") for this entity"),f.assert(g>=this.lastValidFrom,"validFromField ("+g+") must be >= lastValidFrom ("+this.lastValidFrom+") for the Store"),d=l[this.config.validTo],d=null!=d?new i(d,null,this.config.tz).getISOStringInTZ(this.config.tz):e,u=n.lastSnapshot,s={},s._PreviousValues={};for(a in l)p=l[a],a!==this.config.validFromField&&a!==this.config.validToField&&"_PreviousValues"!==a&&a!==this.config.uniqueIDField&&(0>c.call(this.fields,a)&&this.fields.push(a),p!==u[a]&&(s[a]=p,a!==this.config.idField&&(s._PreviousValues[a]=null!=u[a]?u[a]:null)));s[this.config.uniqueIDField]=h,s[this.config.validFromField]=g,s[this.config.validToField]=d,null!=l._PreviousValues&&(s._PreviousValues=l._PreviousValues),s.__proto__=u,u[this.config.validToField]===e&&(u[this.config.validToField]=g),n.lastSnapshot=s,this.lastValidFrom=g,this.byUniqueID[h].snapshots.push(s),this.snapshots.push(s)}}return this},t.prototype.filtered=function(t){var e,n,r,i,a;for(i=[],r=this.snapshots,e=0,n=r.length;n>e;e++)a=r[e],t(a)&&i.push(a);return i},t.prototype.stateBoundaryCrossedFiltered=function(t,e,n,r,i){var a,o,s,u;return null==r&&(r=!0),null==i&&(i=!0),o=e.indexOf(n),f.assert(o>=0,"stateToTheRightOfBoundary must be in stateList"),s=e.slice(0,o),i&&s.unshift(null),u=e.slice(o),a=r?function(e){var n,r;return e._PreviousValues.hasOwnProperty(t)&&(n=e._PreviousValues[t],c.call(s,n)>=0)&&(r=e[t],c.call(u,r)>=0)}:function(e){var n,r;return e._PreviousValues.hasOwnProperty(t)&&(n=e._PreviousValues[t],c.call(u,n)>=0)&&(r=e[t],c.call(s,r)>=0)},this.filtered(a)},t.prototype.stateBoundaryCrossedFilteredBothWays=function(t,e,n,r){var i,a;return null==r&&(r=!0),a=this.stateBoundaryCrossedFiltered(t,e,n,!0,r),i=this.stateBoundaryCrossedFiltered(t,e,n,!1,r),{forward:a,backward:i}},t}(),n.Store=r}).call(this)},{"./dataTransform":21,"./functions":23,tztime:11}],16:[function(t,e,n){(function(){var e,r,i,a,o,s;e=t("./OLAPCube").OLAPCube,o=t("tztime"),s=o.utils,r=o.Time,a=o.Timeline,i=function(){function t(t){var n,r,i,a,o,u,l,f;if(this.config=s.clone(t),null==this.config.validFromField&&(this.config.validFromField="_ValidFrom"),null==this.config.validToField&&(this.config.validToField="_ValidTo"),null==this.config.uniqueIDField&&(this.config.uniqueIDField="_EntityID"),s.assert(null!=this.config.tz,"Must provide a timezone to this calculator."),s.assert(null!=this.config.granularity,"Must provide a granularity to this calculator."),r=[{field:this.config.uniqueIDField}],l=[{field:"ticks",as:"ticks",f:"sum"}],null!=this.config.trackLastValueForTheseFields)for(f=this.config.trackLastValueForTheseFields,a=0,o=f.length;o>a;a++)i=f[a],u={f:"lastValue",field:i},l.push(u);n={dimensions:r,metrics:l},this.cube=new e(n),this.upToDateISOString=null}return t.prototype.addSnapshots=function(t,e,n){var i,o,u,l,f,c;for(null!=this.upToDateISOString&&s.assert(this.upToDateISOString===e,"startOn ("+e+") parameter should equal endBefore of previous call ("+this.upToDateISOString+") to addSnapshots."),this.upToDateISOString=n,c=s.clone(this.config),c.startOn=new r(e,r.MILLISECOND,this.config.tz),c.endBefore=new r(n,r.MILLISECOND,this.config.tz),f=new a(c),i=0,o=t.length;o>i;i++)u=t[i],l=f.ticksThatIntersect(u[this.config.validFromField],u[this.config.validToField],this.config.tz),u.ticks=l.length;return this.cube.addFacts(t),this},t.prototype.getResults=function(){var t,e,n,r,i,a,o,s,u,l,f,c;for(u=[],c=this.cube.getDimensionValues(this.config.uniqueIDField),r=0,o=c.length;o>r;r++){if(i=c[r],n={},n[this.config.uniqueIDField]=i,t=this.cube.getCell(n),l={},l[this.config.uniqueIDField]=i,l.ticks=t.ticks,null!=this.config.trackLastValueForTheseFields)for(f=this.config.trackLastValueForTheseFields,a=0,s=f.length;s>a;a++)e=f[a],l[e+"_lastValue"]=t[e+"_lastValue"];u.push(l)}return u},t.prototype.getStateForSaving=function(t){var e;return e={config:this.config,cubeSavedState:this.cube.getStateForSaving(),upToDateISOString:this.upToDateISOString},null!=t&&(e.meta=t),e},t.newFromSavedState=function(n){var r;return"string"===s.type(n)&&(n=JSON.parse(n)),r=new t(n.config),r.cube=e.newFromSavedState(n.cubeSavedState),r.upToDateISOString=n.upToDateISOString,null!=n.meta&&(r.meta=n.meta),r},t}(),n.TimeInStateCalculator=i}).call(this)},{"./OLAPCube":13,tztime:11}],17:[function(t,e,n){(function(){var e,r,i,a,o,s,u,l=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};e=t("./OLAPCube").OLAPCube,s=t("tztime"),u=s.utils,r=s.Time,a=s.Timeline,o=t("./functions").functions,i=function(){function t(t){var n,i,s,f,c,h,g,d,p,m,y,v,S,T,w,_,b,F,O,A,M,k,I,D,C,B,x,E,P,z,L,R,V,N,q,j;for(this.config=u.clone(t),this.tickToLabelLookup={},null==this.config.validFromField&&(this.config.validFromField="_ValidFrom"),null==this.config.validToField&&(this.config.validToField="_ValidTo"),null==this.config.uniqueIDField&&(this.config.uniqueIDField="_EntityID"),u.assert(null!=this.config.tz,"Must provide a timezone to this calculator."),u.assert(null!=this.config.granularity,"Must provide a granularity to this calculator."),k=[],C=this.config.metrics,y=0,T=C.length;T>y;y++)if(n=C[y],"groupBySum"===(B=n.f)||"groupByCount"===B)for(null==n.prefix&&(n.prefix=""),x=n.allowedValues,v=0,w=x.length;w>v;v++)h=x[v],R={as:n.prefix+h,filterField:n.groupByField,filterValues:[h]},"groupBySum"===n.f?(R.field=n.field,R.f="filteredSum"):R.f="filteredCount",k.push(R);else k.push(n);for(this.config.metrics=k,g=function(t,e){var n;return n=function(n){var r;return r=n[t],l.call(e,r)>=0?1:0}},d=function(t,e,n){var r;return r=function(r){var i;return i=r[e],l.call(n,i)>=0?r[t]:0}},E=this.config.metrics,S=0,_=E.length;_>S;S++)if(n=E[S],"filteredCount"===(P=n.f)||"filteredSum"===P){if(s="filteredCount"===n.f?g(n.filterField,n.filterValues):d(n.field,n.filterField,n.filterValues),null==n.as)throw Error("Must provide `as` specification for a `"+n.f+"` metric.");null==this.config.deriveFieldsOnInput&&(this.config.deriveFieldsOnInput=[]),this.config.deriveFieldsOnInput.push({as:n.as,f:s}),n.f="sum",n.field=n.as}for(p=[{field:this.config.uniqueIDField},{field:"tick"}],c={},z=this.config.metrics,M=0,b=z.length;b>M;M++)A=z[M],null!=A.field&&(c[A.field]=!0);m=[];for(f in c)m.push({field:f,f:"firstValue",as:f});if(this.inputCubeConfig={dimensions:p,metrics:m,deriveFieldsOnInput:this.config.deriveFieldsOnInput},i=[{field:"tick"}],this.cubeConfig={dimensions:i,metrics:this.config.metrics,deriveFieldsOnOutput:this.config.deriveFieldsOnOutput},this.toDateCubeConfig=u.clone(this.cubeConfig),this.toDateCubeConfig.deriveFieldsOnInput=this.config.deriveFieldsOnInput,this.cube=new e(this.cubeConfig),this.upToDateISOString=null,null!=this.config.summaryMetricsConfig)for(L=this.config.summaryMetricsConfig,I=0,F=L.length;F>I;I++)A=L[I],o.expandFandAs(A);if(this.masterStartOnTime=null!=t.startOn?new r(t.startOn,this.config.granularity,this.config.tz):new r("BEFORE_FIRST",this.config.granularity),this.masterEndBeforeTime=null!=t.endBefore?new r(t.endBefore,this.config.granularity,this.config.tz):new r("PAST_LAST",this.config.granularity),null!=t.startOn&&null!=t.endBefore)for(q=u.clone(this.config),q.startOn=this.masterStartOnTime,q.endBefore=this.masterEndBeforeTime,N=new a(q),V=N.getAll("Timeline",this.config.tz,this.config.granularity),D=0,O=V.length;O>D;D++)j=V[D],this.tickToLabelLookup[j.endBefore.getISOStringInTZ(t.tz)]=""+j.startOn}return t.prototype.addSnapshots=function(t,n,i){var o,s,l,f,c,h,g,d,p,m,y,v,S,T,w,_,b,F,O;for(null!=this.upToDateISOString&&u.assert(this.upToDateISOString===n,"startOnISOString ("+n+") parameter should equal upToDateISOString of previous call ("+this.upToDateISOString+") to addSnapshots."),this.upToDateISOString=i,s=u.clone(this.config),s.startOn=new r(i,this.config.granularity,this.config.tz),delete s.endBefore,s.limit=2,o=new a(s),l=o.getIterator(),l.next(),f=l.next(),b=u.clone(this.config),T=new r(n,this.config.granularity,this.config.tz),b.startOn=T.greaterThan(this.masterStartOnTime)?T:this.masterStartOnTime,b.endBefore=f.lessThan(this.masterEndBeforeTime)?f:this.masterEndBeforeTime,this.asOfISOString=b.endBefore.getISOStringInTZ(this.config.tz),_=new a(b),w=_.getAll("Timeline",this.config.tz,this.config.granularity),h=0,p=w.length;p>h;h++)F=w[h],this.tickToLabelLookup[F.endBefore.getISOStringInTZ(this.config.tz)]=""+F.startOn;for(O=[],g=0,m=t.length;m>g;g++)S=t[g],w=_.ticksThatIntersect(S[this.config.validFromField],S[this.config.validToField],this.config.tz),w.length>0&&(S.tick=w,O.push(S));for(c=new e(this.inputCubeConfig,O),this.cube.addFacts(c.getCells()),this.toDateSnapshots=[],d=0,y=t.length;y>d;d++)S=t[d],S[this.config.validToField]>(v=this.asOfISOString)&&v>=S[this.config.validFromField]&&this.toDateSnapshots.push(S);return this},t.prototype.getResults=function(){var n,i,o,s,l,f,c,h,g,d,p,m,y,v,S,T,w,_,b,F,O,A,M,k,I,D,C,B,x,E,P,z,L,R,V,N,q,j,Z,W,J,U,G,H,Y,K,X,$,Q,te,ee,ne,re,ie,ae,oe,se,ue,le,fe,ce,he,ge;if(se=u.keys(this.tickToLabelLookup).sort(),m=function(){var t,e,n;for(n=[],t=0,e=se.length;e>t;t++)ie=se[t],n.push(this.tickToLabelLookup[ie]);return n}.call(this),null!=this.toDateSnapshots&&this.toDateSnapshots.length>0){for(j=this.toDateSnapshots,g=0,T=j.length;T>g;g++)X=j[g],X.tick="To Date";le=new e(this.toDateCubeConfig,this.toDateSnapshots),ue=le.getCells()[0],delete ue._count}for($=[],s=!1,oe=d=0,w=se.length;w>d;oe=++d){if(ie=se[oe],i=u.clone(this.cube.getCell({tick:ie})),null!=i)delete i._count;else{if(te=new r(m[oe]).getISOStringInTZ(this.config.tz),ue&&(Z=this.asOfISOString)>te&&ie>=Z)i=ue;else for(i={},W=this.config.metrics,p=0,_=W.length;_>p;p++)D=W[p],i[D.as]=null;i.tick=ie}i.label=this.tickToLabelLookup[i.tick],$.push(i)}if(re={},null!=this.config.summaryMetricsConfig)for(J=this.config.summaryMetricsConfig,C=0,b=J.length;b>C;C++)if(ne=J[C],null!=ne.field){for(he=[],B=0,F=$.length;F>B;B++)K=$[B],he.push(K[ne.field]);re[ne.as]=ne.f(he)}else re[ne.as]=ne.f($,re);if(null!=this.config.deriveFieldsAfterSummary)for(h=N=0,O=$.length;O>N;h=++N)for(K=$[h],U=this.config.deriveFieldsAfterSummary,q=0,A=U.length;A>q;q++)o=U[q],K[o.as]=o.f(K,h,re,$);if(V={},null!=this.config.projectionsConfig){for(V=u.clone(this.config.projectionsConfig),y=$.length-1,v=$[y],S=v.tick,G=V.series,fe=0,M=G.length;M>fe;fe++)P=G[fe],n=P.as||P.field+"_projection",v[n]=v[P.field];for(H=V.series,ce=0,k=H.length;k>ce;ce++)P=H[ce],null==P.slope&&(null==P.startIndex&&(null==V.minFractionToConsider&&(V.minFractionToConsider=1/3),null==V.minCountToConsider&&(V.minCountToConsider=15),f=Math.floor((1-V.minFractionToConsider)*$.length)-1,c=$.length-1-V.minCountToConsider,l=Math.min(f,c),P.startIndex=1>l?0:t._findVOptimalProjectionStartIndex($,P.field,l)),Q=P.startIndex,ee=$[Q],n=P.as||P.field+"_projection",ee[n]=ee[P.field],P.slope=(v[P.field]-ee[P.field])/(y-Q));for(L=u.clone(this.config),L.startOn=new r(S,this.config.granularity,this.config.tz),delete L.endBefore,L.limit=V.limit||300,z=new a(L),R=z.getIterator("Timeline"),x=0,E=null;R.hasNext()&&(null==E||null==V.continueWhile||V.continueWhile(E));){for(x++,E={},ae=R.next(),E.tick=ae.endBefore.getISOStringInTZ(this.config.tz),E.label=""+ae.startOn,Y=V.series,ge=0,I=Y.length;I>ge;ge++)P=Y[ge],n=P.as||P.field+"_projection",E[n]=v[P.field]+x*P.slope;$.push(E)}V.pointsAddedCount=x,V.lastPoint=E}return{seriesData:$,summaryMetrics:re,projections:V}},t._findVOptimalProjectionStartIndex=function(t,e,n){var r,i,a,o,s,l,f,c,h,g,d;for(u.assert(t.length-2>n,"Cannot use the last two points for calculating v-optimal slope."),l=t.length-1,f=t[l],d=function(){return function(n){return(f[e]-t[n][e])/(l-n)}}(this),r=function(){return function(t){var e,n,r,i,a,o,s,u,f,c;for(c=d(t),f=Math.atan(c),u=0,i=a=o=t+1,s=l-1;s>=o?s>=a:a>=s;i=s>=o?++a:--a)n=d(i),e=Math.atan(n),r=f-e,u+=r*r;return u}}(this),c=Number.MAX_VALUE,o=n,a=s=g=n;0>=g?0>=s:s>=0;a=0>=g?++s:--s)i=r(a),h=i/(t.length-2-a),c>=h&&(c=h,o=a);return o},t.prototype.getStateForSaving=function(t){var e;return e={config:this.config,cubeSavedState:this.cube.getStateForSaving(),upToDateISOString:this.upToDateISOString},null!=t&&(e.meta=t),e},t.newFromSavedState=function(n){var r;return"string"===u.type(n)&&(n=JSON.parse(n)),r=new t(n.config),r.cube=e.newFromSavedState(n.cubeSavedState),r.upToDateISOString=n.upToDateISOString,null!=n.meta&&(r.meta=n.meta),r},t}(),n.TimeSeriesCalculator=i}).call(this)},{"./OLAPCube":13,"./functions":23,tztime:11}],18:[function(t,e,n){(function(){var e,r,i,a,o,s;e=t("./OLAPCube").OLAPCube,o=t("tztime"),s=o.utils,r=o.Time,i=o.Timeline,a=function(){function t(t){var n,i,a,o,u,l,f,c;if(this.config=s.clone(t),null==this.config.validFromField&&(this.config.validFromField="_ValidFrom"),null==this.config.validToField&&(this.config.validToField="_ValidTo"),null==this.config.uniqueIDField&&(this.config.uniqueIDField="_EntityID"),null==this.config.fieldsToSum&&(this.config.fieldsToSum=[]),null==this.config.asterixToDateTimePeriod&&(this.config.asterixToDateTimePeriod=!1),s.assert(null!=this.config.tz,"Must provide a timezone to this calculator."),s.assert(null!=this.config.granularity,"Must provide a granularity to this calculator."),(f=this.config.granularity)===r.HOUR||f===r.MINUTE||f===r.SECOND||f===r.MILLISECOND)throw Error("Transitions calculator is not designed to work on granularities finer than 'day'");for(i=[{field:"timePeriod"}],l=[{field:"count",f:"sum"}],c=this.config.fieldsToSum,o=0,u=c.length;u>o;o++)a=c[o],l.push({field:a,f:"sum"});n={dimensions:i,metrics:l},this.cube=new e(n),this.upToDateISOString=null,this.lowestTimePeriod=null,this.maxTimeString=null!=this.config.asOf?new r(this.config.asOf,r.MILLISECOND).getISOStringInTZ(this.config.tz):r.getISOStringFromJSDate(),this.virgin=!0}return t.prototype.addSnapshots=function(t,e,n,i){var a,o,u;return null==i&&(i=[]),null!=this.upToDateISOString&&s.assert(this.upToDateISOString===e,"startOn ("+e+") parameter should equal endBefore of previous call ("+this.upToDateISOString+") to addSnapshots."),this.upToDateISOString=n,u=""+new r(e,this.config.granularity,this.config.tz),null!=this.lowestTimePeriod?this.lowestTimePeriod>u&&(this.lowestTimePeriod=u):this.lowestTimePeriod=u,a=this._filterSnapshots(t),this.cube.addFacts(a),o=this._filterSnapshots(i,-1),this.cube.addFacts(o),this.virgin=!1,this},t.prototype._filterSnapshots=function(t,e){var n,i,a,o,u,l,f,c,h;for(null==e&&(e=1),i=[],o=0,l=t.length;l>o;o++)if(h=t[o],h[this.config.validFromField]<=this.maxTimeString){if(null!=h.count)throw Error("Snapshots passed into a TransitionsCalculator cannot have a `count` field.");if(null!=h.timePeriod)throw Error("Snapshots passed into a TransitionsCalculator cannot have a `timePeriod` field.");for(a=s.clone(h),a.count=1*e,a.timePeriod=""+new r(h[this.config.validFromField],this.config.granularity,this.config.tz),c=this.config.fieldsToSum,u=0,f=c.length;f>u;u++)n=c[u],a[n]=e*h[n];i.push(a)}return i},t.prototype.getResults=function(){var t,e,n,a,o,s,u,l,f,c,h,g,d,p,m,y,v,S;if(this.virgin)return[];for(h=[],this.highestTimePeriod=""+new r(this.maxTimeString,this.config.granularity,this.config.tz),e={startOn:this.lowestTimePeriod,endBefore:this.highestTimePeriod,granularity:this.config.granularity},y=new i(e),v=function(){var t,e,n,r;for(n=y.getAllRaw(),r=[],t=0,e=n.length;e>t;t++)m=n[t],r.push(""+m);return r}(),v.push(this.highestTimePeriod),o=0,l=v.length;l>o;o++){if(S=v[o],a={},a.timePeriod=S,t=this.cube.getCell(a),g={},g.timePeriod=S,null!=t)for(g.count=t.count_sum,d=this.config.fieldsToSum,s=0,f=d.length;f>s;s++)n=d[s],g[n]=t[n+"_sum"];else for(g.count=0,p=this.config.fieldsToSum,u=0,c=p.length;c>u;u++)n=p[u],g[n]=0;h.push(g)}return this.config.asterixToDateTimePeriod&&(h[h.length-1].timePeriod+="*"),h},t.prototype.getStateForSaving=function(t){var e;return e={config:this.config,cubeSavedState:this.cube.getStateForSaving(),upToDateISOString:this.upToDateISOString,maxTimeString:this.maxTimeString,lowestTimePeriod:this.lowestTimePeriod,virgin:this.virgin},null!=t&&(e.meta=t),e},t.newFromSavedState=function(n){var r;return"string"===s.type(n)&&(n=JSON.parse(n)),r=new t(n.config),r.cube=e.newFromSavedState(n.cubeSavedState),r.upToDateISOString=n.upToDateISOString,r.maxTimeString=n.maxTimeString,r.lowestTimePeriod=n.lowestTimePeriod,r.virgin=n.virgin,null!=n.meta&&(r.meta=n.meta),r},t}(),n.TransitionsCalculator=a}).call(this)},{"./OLAPCube":13,tztime:11}],19:[function(t,e,n){(function(){var e,r,i,a,o,s,u;
u=t("tztime").utils,a=t("./functions").functions,s=t("./distributions").distributions,i=s.fDist,o=s.normInverseUpper,r=t("./correlate").correlate,e=function(t,e,n,r,s){var l,f,c,h,g,d,p,m,y,v,S,T,w,_,b,F,O,A,M,k,I,D,C,B,x,E,P,z,L,R,V,N,q,j,Z,W,J,U,G,H,Y,K,X,$,Q,te,ee,ne,re,ie,ae,oe,se,ue,le,fe,ce,he,ge;for(null==s&&(s=.95),u.assert(s>0&&1>s,"ci must be between 0.0 and 1.0"),c=null!=e?function(){var r,i,a;for(a=[],r=0,i=t.length;i>r;r++)re=t[r],e(re)&&null!=re[n]&&a.push(re);return a}():t,u.assert(r.length<c.length,"After filtering with the overallPredicate, there were fewer rows in the dataset than there were groups"),q=0,j=0,Z=0,J=0,F=0,M=r.length;M>F;F++)T=r[F],T.values=function(){var t,e,r;for(r=[],t=0,e=c.length;e>t;t++)re=c[t],T.predicate(re)&&r.push(re[n]);return r}(),T.sum=a.sum(T.values),T.n=T.values.length,T.sumSquares=a.sumSquares(T.values),T.variance=a.variance(T.values),T.standardDeviation=Math.sqrt(T.variance),T.mean=T.sum/T.n,q+=T.n,j+=T.sum,Z+=T.sumSquares,J+=(T.n-1)*T.variance;for(N=j/q,U=Math.sqrt(J/(q-r.length)),z=o((1-s)/2),O=0,k=r.length;k>O;O++)T=r[O],T.ciDelta=z*U/Math.sqrt(T.n);for(ne=[],A=0,I=r.length;I>A;A++)for(T=r[A],X=T.values,P=0,D=X.length;D>P;P++)ue=X[P],te=T.mean-ue,ne.push(te);for(ne=ne.sort(function(t,e){return t-e}),ee=[],b=L=0,C=ne.length;C>L;b=++L)H=ne[b],_=b+1,ce=1===_?1-Math.pow(.5,1/ne.length):_===ne.length?Math.pow(.5,1/ne.length):(_-.3175)/(ne.length+.365),ce-=.5,ce=0===ce?0:Math.abs(ce)*ce,ee.push({x:H,y:ce});for(fe=function(){var t,e,n;for(n=[],e=0,t=ee.length;t>e;e++)H=ee[e],n.push(H.x);return n}(),ge=function(){var t,e,n;for(n=[],e=0,t=ee.length;t>e;e++)H=ee[e],n.push(H.y);return n}(),le=a.standardDeviation(fe),he=a.standardDeviation(ge),V=0,B=ee.length;B>V;V++)H=ee[V],H.x=H.x/le,H.y=H.y/he;for(f={},l=W=$=-2.5;2.5>=$?2.5>=W:W>=2.5;l=2.5>=$?++W:--W)f[l]=0;for(G=0,x=ee.length;x>G;G++)H=ee[G],l=Math.floor(H.y+1)-.5,f[l]+=1;for(w=[],l=ie=Q=-2.5;2.5>=Q?2.5>=ie:ie>=2.5;l=2.5>=Q?++ie:--ie)re={label:-.5+l+" to "+(.5+l),center:l,count:f[l]},w.push(re);for(p=r.length-1,h=q-r.length,oe=p+h,S=0,ae=0,E=r.length;E>ae;ae++)T=r[ae],S+=T.n*T.mean*T.mean;return R=q*N*N,S-=R,se=Z-R,d=se-S,y=S/p,g=d/h,m=y/g,v=i(p,h,m),Y=S/se,K=Math.abs(1-(1-Y)*(q-1)/(q-r.length)),{factorDF:p,factorSS:S,factorMS:y,factorF:m,factorP:v,errorDF:h,errorSS:d,errorMS:g,totalDF:oe,totalSS:se,rSquared:Y,rSquaredAdjusted:K,residualPlot:ee,histogram:w,pooledStandardDeviation:U}},n.anova=e}).call(this)},{"./correlate":20,"./distributions":22,"./functions":23,tztime:11}],20:[function(t,e,n){(function(){var t;t=function(t,e,n){var r,i,a,o,s,u,l,f,c,h,g,d,p,m;for(null==e&&(e="x"),null==n&&(n="y"),u=t.length,h=0,p=0,d=0,g=0,m=0,a=0,s=t.length;s>a;a++)l=t[a],h+=l[e],p+=l[n],d+=l[e]*l[n],g+=l[e]*l[e],m+=l[n]*l[n];return i=u*g-h*h,o=(p*g-h*d)/i,c=(u*d-h*p)/i,f=Math.pow((u*d-h*p)/Math.sqrt((u*g-h*h)*(u*m-p*p)),2),r="y = "+c+" * x + "+o+" with R^2 of "+f,{intercept:o,slope:c,rSquared:f,description:r}},n.correlate=t}).call(this)},{}],21:[function(t,e,n){(function(){var e,r,i,a,o,s,u,l;u=t("tztime"),l=u.utils,e=u.Time,o=function(t,e){var n,r,i,a,o,s,u,l,f;for(n=[],null!=e?r=0:(e=t[0],r=1),f=t.length;f>r;){for(a=t[r],l={},i=o=0,u=e.length;u>o;i=++o)s=e[i],l[s]=a[i];n.push(l),r++}return n},r=function(t,e){var n,r,i,a,o,s,u,l,f,c;if(0===t.length)return[];if(n=[],l=[],null==e){e=[],f=t[0];for(o in f)c=f[o],e.push(o)}for(n.push(e),i=0,s=t.length;s>i;i++){for(r=t[i],l=[],a=0,u=e.length;u>a;a++)o=e[a],l.push(r[o]);n.push(l)}return n},i=function(t,e){var n,r,i,a,o,s,u,l,f,c,h,g,d,p,m,y,v,S,T;for(m={},v=[],a=0,l=e.length;l>a;a++)n=e[a],v.push(n.name);for(o=0,f=v.length;f>o;o++)for(y=v[o],m[y]=[],u=0,c=t.length;c>u;u++)r=t[u],T=r[y],null==T&&(T=null),m[y].push(T);for(d=[],i=g=0,h=v.length;h>g;i=++g){y=v[i],p={name:y,data:m[y]},S=e[i];for(s in S)T=S[s],"name"!==s&&"data"!==s&&(p[s]=T);d.push(p)}return d},a=function(t,e){var n,r,i,a,o,s,u,l,f,c,h,g,d,p,m;for(null==e&&(e=!0),m=t.split("\n"),o=m[0].split(",").length,g=[],s=u=0,f=m.length;f>u;s=++u)if(p=m[s],h=[],d=p.split(","),d.length===o){for(l=0,c=d.length;c>l;l++){if(n=d[l],e&&"*"===n)r=void 0;else try{r=JSON.parse(n)}catch(a){i=a}h.push(r)}g.push(h)}else console.log("Warning: Skipping row because length does not match header length in row "+s+": "+p);return g},s=function(t){var e,n,r,i,a,o,s;for(o="",e=0,r=t.length;r>e;e++){for(a=t[e],n=0,i=a.length;i>n;n++)s=a[n],o+=JSON.stringify(s)+", ";o+="\n"}return o},n.arrayOfMaps_To_CSVStyleArray=r,n.csvStyleArray_To_ArrayOfMaps=o,n.arrayOfMaps_To_HighChartsSeries=i,n.csvString_To_CSVStyleArray=a,n.csvStyleArray_To_CSVString=s}).call(this)},{tztime:11}],22:[function(t,e,n){(function(){var t;t={},t.fDist=function(t,e,n){var r,i,a,o,s,u,l;if(o=void 0,0>=n)o=1;else if(0===e%2){for(l=e/(e+t*n),r=1,a=e-2;a>=2;)r=1+(t+a-2)/a*l*r,a-=2;o=1-Math.pow(1-l,t/2)*r}else if(0===t%2){for(l=t*n/(e+t*n),r=1,a=t-2;a>=2;)r=1+(e+a-2)/a*l*r,a-=2;o=Math.pow(1-l,e/2)*r}else{for(u=Math.atan2(Math.sqrt(t*n/e),1),l=Math.pow(Math.sin(u),2),r=1===t?0:1,a=t-2;a>=3;)r=1+(e+a-2)/a*l*r,a-=2;for(i=Math.PI,a=2;e-1>=a;)i*=(a-1)/a,a+=2;for(s=2/i*Math.sin(u)*Math.pow(Math.cos(u),e)*r,l=Math.pow(Math.cos(u),2),r=1===e?0:1,a=e-2;a>=3;)r=1+(a-1)/a*l*r,a-=2;o=Math.max(0,s+1-2*u/Math.PI-2/Math.PI*Math.sin(u)*Math.cos(u)*r)}return o},t.tInverseUpper=function(t,e){var n,r,i,a,o,s,u,l,f,c,h,g;if(e>=1||0>=e)throw Error("Invalid p: p\n");if(.5===e)return 0;if(.5>e)return-_subt(t,1-e);if(f=_subu(e),c=Math.pow(f,2),n=(c+1)/4,r=((5*c+16)*c+3)/96,i=(((3*c+19)*c+17)*c-15)/384,a=((((79*c+776)*c+1482)*c-1920)*c-945)/92160,s=(((((27*c+339)*c+930)*c-1782)*c-765)*c+17955)/368640,h=f*(1+(n+(r+(i+(a+s/t)/t)/t)/t)/t),Math.pow(log10(e),2)+3>=t)for(l=void 0;;)if(g=_subtprob(t,h),u=t+1,o=(g-e)/Math.exp((u*Math.log(u/(t+h*h))+Math.log(t/u/2/Math.PI)-1+(1/u-1/t)/6)/2),h+=o,l=round_to_precision(o,Math.abs(integer(log10(Math.abs(h))-4))),!h||0===l)break;return h},t.tDist=function(t,e){var n,r,i,a,o,s;for(n=void 0,r=void 0,a=Math.atan2(e/Math.sqrt(t),1),s=Math.pow(Math.cos(a),2),o=1,i=t-2;i>=2;)o=1+(i-1)/i*s*o,i-=2;return 0===t%2?(n=Math.sin(a)/2,r=.5):(n=1===t?0:Math.sin(a)*Math.cos(a)/Math.PI,r=.5+a/Math.PI),Math.max(0,1-r-n*o)},t.normDist=function(t){var e,n,r;if(r=0,e=Math.abs(t),1.9>e)r=Math.pow(1+e*(.049867347+e*(.0211410061+e*(.0032776263+e*(380036e-10+e*(488906e-10+5383e-9*e))))),-16)/2;else if(100>=e){for(n=18;n>=1;)r=n/(e+r),n--;r=Math.exp(-.5*e*e)/Math.sqrt(2*Math.PI)/(e+r)}return 0>t&&(r=1-r),r},t.normInverseUpper=function(t){var e,n;return n=-Math.log(4*t*(1-t)),e=Math.sqrt(n*(1.570796288+n*(.03706987906+n*(-.0008364353589+n*(-.0002250947176+n*(6841218299e-15+n*(5824238515e-15+n*(-104527497e-14+n*(8.360937017e-8+n*(-3.231081277e-9+n*(3.657763036e-11+6.936233982e-13*n))))))))))),t>.5&&(e=-e),e},t.normInverse=function(e){return t.normInverseUpper(1-e)},n.distributions=t}).call(this)},{}],23:[function(t,e,n){(function(){var e,r;r=t("tztime").utils,e={},e._populateDependentValues=function(t,n,r,i){var a,o,s,u,l;for(null==r&&(r={}),null==i&&(i=""),l={},o=0,u=n.length;u>o;o++)a=n[o],s="count"===a?""===i?"count":"_count":i+a,null==r[s]&&(r[s]=e[a](t,void 0,void 0,r,i)),l[a]=r[s];return l},e.sum=function(t,e,n){var r,i,a,o,s;for(null!=e?(a=e,o=n):(a=0,o=t),r=0,i=o.length;i>r;r++)s=o[r],a+=s;return a},e.product=function(t,e,n){var r,i,a,o,s;for(null!=e?(a=e,o=n):(a=1,o=t),r=0,i=o.length;i>r;r++)s=o[r],a*=s;return a},e.sumSquares=function(t,e,n){var r,i,a,o,s;for(null!=e?(a=e,o=n):(a=0,o=t),r=0,i=o.length;i>r;r++)s=o[r],a+=s*s;return a},e.sumCubes=function(t,e,n){var r,i,a,o,s;for(null!=e?(a=e,o=n):(a=0,o=t),r=0,i=o.length;i>r;r++)s=o[r],a+=s*s*s;return a},e.lastValue=function(t,e,n){return null!=n?n[n.length-1]:t[t.length-1]},e.firstValue=function(t,e){return null!=e?e:t[0]},e.count=function(t,e,n){return null!=e?e+n.length:t.length},e.min=function(t,n,r){var i,a,o,s;if(null!=n)return e.min(r.concat([n]));if(0===t.length)return null;for(o=t[0],i=0,a=t.length;a>i;i++)s=t[i],o>s&&(o=s);return o},e.max=function(t,n,r){var i,a,o,s;if(null!=n)return e.max(r.concat([n]));if(0===t.length)return null;for(o=t[0],i=0,a=t.length;a>i;i++)s=t[i],s>o&&(o=s);return o},e.values=function(t,e,n){return null!=e?e.concat(n):t},e.uniqueValues=function(t,e,n){var r,i,a,o,s,u,l,f,c,h,g;if(l={},null!=e){for(r=0,o=e.length;o>r;r++)u=e[r],l[u]=null;c=n}else c=t;for(f=[],a=0,s=c.length;s>a;a++)h=c[a],l[h]=null;for(i in l)g=l[i],f.push(i);return f},e.average=function(t,n,r,i,a){var o,s,u;return s=e._populateDependentValues(t,e.average.dependencies,i,a),o=s.count,u=s.sum,0===o?null:u/o},e.average.dependencies=["count","sum"],e.errorSquared=function(t,n,r,i,a){var o,s,u,l,f,c,h,g,d;for(h=e._populateDependentValues(t,e.errorSquared.dependencies,i,a),o=h.count,g=h.sum,c=g/o,u=0,l=0,f=t.length;f>l;l++)d=t[l],s=d-c,u+=s*s;return u},e.errorSquared.dependencies=["count","sum"],e.variance=function(t,n,r,i,a){var o,s,u,l;return s=e._populateDependentValues(t,e.variance.dependencies,i,a),o=s.count,u=s.sum,l=s.sumSquares,0===o?null:1===o?0:(o*l-u*u)/(o*(o-1))},e.variance.dependencies=["count","sum","sumSquares"],e.standardDeviation=function(t,n,r,i,a){return Math.sqrt(e.variance(t,n,r,i,a))},e.standardDeviation.dependencies=e.variance.dependencies,e.percentileCreator=function(t){var n;return n=function(n,r,i,a,o){var s,u,l,f,c;return null==n&&(n=e._populateDependentValues(n,["values"],a,o).values),0===n.length?null:(f=function(t,e){return t-e},c=n.length,n.sort(f),l=t*(c-1)/100+1,u=Math.floor(l),s=l-u,1===l?n[0]:l===c?n[c-1]:n[u-1]+s*(n[u]-n[u-1]))},n.dependencies=["values"],n},e.median=e.percentileCreator(50),e.expandFandAs=function(t){var n;if(r.assert(null!=t.f,"'f' missing from specification: \n"+JSON.stringify(t,void 0,4)),"function"===r.type(t.f))r.assert(null!=t.as,'Must provide "as" field with your aggregation when providing a user defined function'),t.metric=""+t.f;else if(null!=e[t.f])t.metric=t.f,t.f=e[t.f];else{if("p"!==t.f.substr(0,1))throw Error(t.f+" is not a recognized built-in function");t.metric=t.f,n=/\p(\d+(.\d+)?)/.exec(t.f)[1],t.f=e.percentileCreator(Number(n))}return null==t.as&&("count"===t.metric&&(t.field="",t.metric="count"),t.as=t.field+"_"+t.metric,r.assert(null!=t.field||"count"===t.f,"'field' missing from specification: \n"+JSON.stringify(t,void 0,4))),t},e.expandMetrics=function(t,n,i){var a,o,s,u,l,f,c,h,g,d,p,m,y;if(null==t&&(t=[]),null==n&&(n=!1),null==i&&(i=!1),o=function(e,n,r){var i,a,o,s;for(o="count"===e?"_"+e:n+"_"+e,a=0;r>a;){if(i=t[a],i.as===o)return!0;a++}for(a=r+1,s=t.length;s>a;){if(i=t[a],i.as===o)throw Error("Depdencies must appear before the metric they are dependant upon. "+e+" appears after.");a++}return!1},a=function(n,r,i){var a,s,u,l;for(s=0,u=n.length;u>s;s++)if(a=n[s],!o(a,r,i))return l="count"===a?{f:"count"}:{f:a,field:r},e.expandFandAs(l),t.unshift(l),!1;return!0},i)for(f=c=0,g=t.length;g>c;f=++c)p=t[f],"function"===r.type(p.f)&&(null==p.f.dependencies&&(p.f.dependencies=[]),"values"!==p.f.dependencies[0]&&p.f.dependencies.push("values"),o("values",p.field,f)||(y={f:"values",field:p.field},e.expandFandAs(y),t.unshift(y)));for(l=!1,h=0,d=t.length;d>h;h++)p=t[h],e.expandFandAs(p),"count"===p.metric&&(l=!0);for(n&&!l&&(s={f:"count"},e.expandFandAs(s),t.unshift(s)),f=0;t.length>f;)m=t[f],"function"===r.type(m.f)&&(u=["values"]),null!=m.f.dependencies&&(a(m.f.dependencies,m.field,f)||(f=-1)),f++;return t},n.functions=e}).call(this)},{tztime:11}],24:[function(t,e,n){(function(){var e,r,i,a,o,s,u,l;e=t("./functions").functions,l=t("tztime").utils,i={},a=function(){},r=function(t){var n,r,i;return i=Math.floor(Math.sqrt(t.length))+1,3>i&&(i=2),r=e.min(t),n=e.max(t),{targetBucketCount:i,min:r,max:n}},s=function(t,e){var n;return null==e?t:(n=1/e,Math.ceil(t*n)/n)},o=function(t,e){var n;return null==e?t:(n=1/e,Math.floor(t*n)/n)},u=function(t,e,n,i,a,u){var l,f,c,h,g,d,p,m;return m=null!=e?function(){var n,r,i;for(i=[],n=0,r=t.length;r>n;n++)g=t[n],i.push(g[e]);return i}():t,h=r(m),d=h.targetBucketCount,c=h.min,f=h.max,null==a&&(a=d),null!=n?l=n:(l=o(c,u),n=null),null!=i?p=i:(p=s(f,u),i=null),{values:m,bucketCount:a,firstStartOn:n,lowerBase:l,lastEndBelow:i,upperBase:p}},i.bucketsLog=function(t,e,n,r,i,a){var o,s,l,f,c,h,g,d,p,m;if(null!=n)throw Error("Significance not supported for bucketsLog.");if(g=u(t,e,r,i,a,n),m=g.values,a=g.bucketCount,r=g.firstStartOn,h=g.lowerBase,i=g.lastEndBelow,p=g.upperBase,0>h)throw Error("bucketsLog do not support values below zero. Strip those out if you want to use this.");for(0===h?r=0:(l=Math.floor(Math.log10(h)),r=Math.pow(10,l)),c=Math.floor(Math.log10(p))+1,i=Math.pow(10,c),f=0,d=r,s=0===d?1:Math.pow(10,l+1),o=[];i>=s;)o.push({index:f,startOn:d,endBelow:s}),d=s,s=10*s,f++;return o},i.bucketsConstantWidth=function(t,e,n,r,i,a){var s,l,f,c,h,g,d,p,m,y,v,S;if(m=u(t,e,r,i,a,n),S=m.values,a=m.bucketCount,r=m.firstStartOn,p=m.lowerBase,i=m.lastEndBelow,v=m.upperBase,f=[],3>a)return s={index:0,startOn:r,endBelow:i,label:"all"},f.push(s),f;if(l=o((v-p)/a,n),0>=l)throw Error("Calculated bucketSizes <= 0 are not allowed. Try a smaller significance.");for(d=p+l,s={index:0,startOn:r,endBelow:d},f.push(s),h=g=1,y=a-2;y>=1?y>=g:g>=y;h=y>=1?++g:--g)c=d+l,f.push({index:h,startOn:d,endBelow:c}),d=c;if(null!=d&&null!=i&&d>=i)throw Error("Somehow, the last bucket didn't work out. Try a smaller significance. lastEdge: "+d+"  lastEndBelow: "+i);return s={index:a-1,startOn:d,endBelow:i},f.push(s),f},i.bucketsConstantDepth=function(t,n,r,i,a,s){var l,f,c,h,g,d,p,m,y,v,S,T;if(y=u(t,n,i,a,s,r),T=y.values,s=y.bucketCount,i=y.firstStartOn,m=y.lowerBase,a=y.lastEndBelow,S=y.upperBase,3>s)return l={index:0,startOn:i,endBelow:a},c.push(l),c;for(f=100/s,c=[],h=o(e.percentileCreator(f)(T),r),l={index:0,startOn:i,endBelow:h},c.push(l),g=d=1,v=s-2;v>=1?v>=d:d>=v;g=v>=1?++d:--d)p=h,h=o(e.percentileCreator(f*(g+1))(T),r),c.push({index:g,startOn:p,endBelow:h});if(null!=p&&null!=a&&p>=a)throw Error("Somehow, the last bucket didn't work out. Try a different bucketCount.");return l={index:s-1,startOn:h,endBelow:a},c.push(l),c},i.bucketsPercentile=function(t,e){var n,r,a,o,s;for(r=i.buckets(t,e,i.bucketsConstantDepth,null,null,null,100),s=0,a=0,o=r.length;o>a;a++)n=r[a],null!=n.matchingRangeIndexEnd?(n.percentileHigherIsBetter=n.matchingRangeIndexStart,n.percentileLowerIsBetter=99-n.matchingRangeIndexEnd,s=n.matchingRangeIndexEnd,delete n.matchingRangeIndexEnd,delete n.matchingRangeIndexStart):(n.percentileHigherIsBetter=s,n.percentileLowerIsBetter=99-s),s++;return r},i.buckets=function(t,e,n,r,a,o,s){var u,l,f,c,h,g,d,p,m,y;if(null==n&&(n=i.bucketsConstantWidth),y=n(t,e,r,a,o,s),2>y.length)l=y;else{for(l=[],m=y[0],c=!1,h=1;y.length>h;){if(f=y[h],m.startOn===f.startOn){for(h++,f=y[h];null!=f&&m.startOn===f.startOn&&m.endBelow===f.endBelow;)h++,f=y[h];h>=y.length-1&&(f=y[y.length-1],c=!0),m.matchingRangeIndexStart=m.index,m.matchingRangeIndexEnd=f.index,m.endBelow=f.endBelow,l.push(m),h++,f=y[h]}else l.push(m);m=f,h++}c||l.push(f)}for(g=d=0,p=l.length;p>d;g=++d)u=l[g],u.index=g,u.label=null!=u.startOn&&null!=u.endBelow?u.startOn+"-"+u.endBelow:null!=u.startOn?">= "+u.startOn:null!=u.endBelow?"< "+u.endBelow:"all";return l},i.bucket=function(t,e){var n,r,i,a;if(null==t)return null;if(e.length>=3)for(r=i=1,a=e.length-2;a>=1?a>=i:i>=a;r=a>=1?++i:--i)if(n=e[r],t>=n.startOn&&n.endBelow>t)return n;if(n=e[0],null!=n.startOn&&null!=n.endBelow){if(t>=n.startOn&&n.endBelow>t)return n}else if(null!=n.startOn){if(t>=n.startOn)return n}else if(null!=n.endBelow){if(n.endBelow>t)return n}else if(null==n.startOn&&null==n.endBelow)return n;if(n=e[e.length-1],null!=n.endBelow){if(t>=n.startOn&&n.endBelow>t)return n}else if(t>=n.startOn)return n;return null},i.histogramFromBuckets=function(t,e,n){var r,a,o,s,u,f,c,h,g,d;for(d=null!=e?function(){var n,r,i;for(i=[],n=0,r=t.length;r>n;n++)h=t[n],i.push(h[e]);return i}():t,a=l.clone(n),s=0,f=a.length;f>s;s++)o=a[s],o.count=0;for(u=0,c=d.length;c>u;u++)g=d[u],r=i.bucket(g,n),null!=r&&a[r.index].count++;return a},i.histogram=function(t,e,n,r,a,o,s){var u;return null==n&&(n=i.constantWidth),u=i.buckets(t,e,n,r,a,o,s),i.histogramFromBuckets(t,e,u)},i.clipping=function(t,n,r){var i,a,o,s,u,l,f,c,h,g,d,p,m,y,v,S,T,w,_,b,F,O,A,M,k,I,D,C;for(null==r&&(r=!1),c=null!=n?function(){var e,r,i;for(i=[],e=0,r=t.length;r>e;e++)k=t[e],i.push(k[n]);return i}():t,b=e.max(c),b=Math.max(b,1),r?(D=b,h=c):(A=e.percentileCreator(75)(c),O=e.percentileCreator(25)(c),p=A-O,D=A+1.5*p,(isNaN(D)||D>b)&&(D=b),h=function(){var t,e,n;for(n=[],t=0,e=c.length;e>t;t++)l=c[t],D>=l&&n.push(l);return n}()),o=Math.floor(Math.sqrt(h.length)),3>o&&(o=2),s=Math.floor(D/o)+1,D=s*o,f=D+s,C=Math.floor(e.max(c))+1,C=Math.max(f,C),m=0,S=t.length;S>m;m++)k=t[m],k.clippedChartValue=k[n]>=D?D+s*(k[n]-D)/(C-D):k[n];for(u=[],d=y=0,M=o;M>=0?M>=y:y>=M;d=M>=0?++y:--y)a={label:Math.floor(d*s)+"-"+Math.floor((d+1)*s),rows:[],count:0},u.push(a);for(g=!(C===f),u[o].label=g?D+"-"+C+"*":D+"-"+C,I=0,v=0,T=t.length;T>v;v++)k=t[v],a=k[n]>=D?u[u.length-1]:u[Math.floor(k[n]/s)],a.rows.push(k),a.count++,I++;for(F=0,_=0,w=u.length;w>_;_++)i=u[_],F+=i.count/I,i.percentile=isNaN(F)?0:F;return u[u.length-1].percentile=1,{buckets:u,bucketSize:s,chartMax:f,clipped:g,valueMax:C}},n.histogram=i}).call(this)},{"./functions":23,tztime:11}],25:[function(t,e,n){(function(){var t,e;t={},t.calculateA=function(t){var e,n,r,i,a,o,s,u,l,f,c,h;for(u=t[0].length,s=t.length,e=[],n=a=0,f=u-1;f>=0?f>=a:a>=f;n=f>=0?++a:--a)for(e.push([]),r=o=0,c=u;c>=0?c>=o:o>=c;r=c>=0?++o:--o)for(e[n].push(0),i=l=0,h=s-1;h>=0?h>=l:l>=h;i=h>=0?++l:--l)e[n][r]+=(0===n?1:t[i][n-1])*(0===r?1:t[i][r-1]);return e},t.swapRows=function(t,e,n){var r,i,a,o,s;for(o=[],r=i=0,a=t[0].length-1;a>=0?a>=i:i>=a;r=a>=0?++i:--i)s=t[e][r],t[e][r]=t[n][r],o.push(t[n][r]=s);return o},e=function(){},n.multiRegression=t}).call(this)},{}],26:[function(t,e,n){(function(){var e,r;r=t("tztime").utils,e={},e.padToWidth=function(t,e,n,r){var i;return null==n&&(n=" "),null==r&&(r=!1),t.length>e?t.substr(0,e):(i=Array(e-t.length+1).join(n),r?t+i:i+t)},e.toString=function(t,n,i,a){var o,s,u,l,f,c,h,g,d,p,m,y,v,S,T,w,_,b,F,O,A,M,k;if(null==a&&(a=!1),null==n){n=[],_=t[0];for(c in _)k=_[c],n.push(c)}for(T=[],u=s=0,g=n.length;g>s;u=++s)for(o=n[u],T.push(o.length),l=0,d=t.length;d>l;l++)O=t[l],T[u]=Math.max(T[u],(null!=(b=O[o])?(""+b).length:void 0)||0);for(null!=i?(M=r._.sortBy(t,i),a&&(M=M.reverse())):M=t,A="|",u=f=0,p=n.length;p>f;u=++f)o=n[u],A+=" ",A+=e.padToWidth(o,T[u],void 0,!0)+" |";for(A+="\n|",u=h=0,m=n.length;m>h;u=++h)o=n[u],A+=" ",A+=e.padToWidth("",T[u],"-",!0)+" |";for(S=0,y=M.length;y>S;S++)for(O=M[S],A+="\n|",u=w=0,v=n.length;v>w;u=++w)o=n[u],A+=" ",A+=e.padToWidth((null!=(F=O[o])?""+F:void 0)||"",T[u],void 0,!0)+" |";return A},n.table=e}).call(this)},{tztime:11}]},{},[]);